<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Rolling Differences (CAGR and Log) and Liquidity for UCITS ETFs; Survival and Other Financial Planning Plots • fundsr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Rolling Differences (CAGR and Log) and Liquidity for UCITS ETFs; Survival and Other Financial Planning Plots">
<meta name="description" content="A small tidyverse-based framework for importing and plotting UCITS ETF and index data, ETF liquidity measures, as well as survival curves and other plots related to financial planning.">
<meta property="og:description" content="A small tidyverse-based framework for importing and plotting UCITS ETF and index data, ETF liquidity measures, as well as survival curves and other plots related to financial planning.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">fundsr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/fundsr-intro.html">fundsr-intro: Rolling differences and Xetra liquidity plots</a></li>
    <li><a class="dropdown-item" href="articles/life-vignette.html">life: Survival chances for financial planning</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/StanTraykov/fundsr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h1></div>
<div class="float">
<img src="reference/figures/combined.png" alt="combined plots"><div class="figcaption">combined plots</div>
</div>
<p>fundsr imports fund NAVs and index levels and creates tracking difference plots (CAGR and log-return). Plotting Xetra liquidity data (XLM) is also supported.</p>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<!-- badges: start -->

<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span></span>
<span><span class="co"># Stable (latest release):</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"StanTraykov/fundsr@*release"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Development:</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"StanTraykov/fundsr"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="from-my-r-universe-binary-builds">From my r-universe (binary builds)<a class="anchor" aria-label="anchor" href="#from-my-r-universe-binary-builds"></a>
</h3>
<p><a href="https://stantraykov.r-universe.dev/fundsr" class="external-link"><img src="https://stantraykov.r-universe.dev/fundsr/badges/version" alt="fundsr status badge"></a></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span></span>
<span>  <span class="st">"fundsr"</span>,</span>
<span>  repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://stantraykov.r-universe.dev"</span>,</span>
<span>            <span class="st">"https://cloud.r-project.org"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h1>
<ul>
<li>
<a href="https://stantraykov.github.io/fundsr/articles/fundsr-intro.html">Intro vignette</a> contains a simple walkthrough comparing IUSQ and SPYY (no data setup needed)</li>
<li>
<code>inst/scripts/examples</code> (e.g. open <code>.Rproj</code> file in R Studio after installing the package)
<ul>
<li>
<code>glob_funds.R</code> is a more comprehensive example featuring global funds but requiring index &amp; fund data download outside the package</li>
<li>
<code>all_funds.R</code> and <code>all_funds-GR.R</code> feature many more funds for analysis vs net/gross benchmark</li>
</ul>
</li>
<li><a href="https://stantraykov.github.io/fundsr/reference/index.html">Reference</a></li>
</ul>
</div>
<div class="section level1">
<h1 id="importing-data">Importing data<a class="anchor" aria-label="anchor" href="#importing-data"></a>
</h1>
<p>Fund and index data are stored in fundsr’s storage environment as tibbles / dfs with date columns and one or more value columns. Index level columns must be in upppercase (e.g. <code>ACWI</code>, <code>FTAW</code>). Fund NAV columns must be in lowercase (e.g. <code>spyy</code>, <code>vwce</code>).</p>
<div class="section level2">
<h2 id="funds">Funds<a class="anchor" aria-label="anchor" href="#funds"></a>
</h2>
<div class="section level3">
<h3 id="supported-formats-amundi-hsbc-invesco-ishares-spdr-ubs-vanguard-xtrackers">Supported formats (Amundi, HSBC, Invesco, iShares, SPDR, UBS, Vanguard, Xtrackers)<a class="anchor" aria-label="anchor" href="#supported-formats-amundi-hsbc-invesco-ishares-spdr-ubs-vanguard-xtrackers"></a>
</h3>
<p>Fund providers allow downloading a NAV history in Excel format (even if it’s sometimes incomplete). iShares and SPDR downloads can be automated easily and fundsr supports this via the <a href="https://stantraykov.github.io/fundsr/reference/add_fund_urls.html"><code>add_fund_urls()</code></a> and <a href="https://stantraykov.github.io/fundsr/reference/download_fund_data.html"><code>download_fund_data()</code></a> functions—see the intro vignette for more info. For the others, manual downloads (or non-trivial automation) seem necessary. In this case, the fund <code>.xls</code> or <code>.xlsx</code> file must be made available to fundsr in the data directory. If the filename matches the ticker (e.g. <code>FWRA.xlsx</code>) it can be imported without specifying a file.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">add_data_loader</span>(<span class="cf">function</span> () {</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">inve</span>(<span class="st">"FWRA"</span>, <span class="at">benchmark =</span> <span class="st">"FTAW"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">amun</span>(<span class="st">"WEBN"</span>, <span class="at">benchmark =</span> <span class="st">"GMLM"</span>, <span class="at">file =</span> <span class="st">"NAV History_Amundi Prime All Country World UCITS ETF Acc_IE0003XJA0J9_10_06_2024.xlsx"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>}</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">run_data_loaders</span>()</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="other-funds">Other funds<a class="anchor" aria-label="anchor" href="#other-funds"></a>
</h3>
<p>Prepare a tibble/dataframe or a CSV file with a date column and one or more data columns that must be lowercase for funds (e.g. <code>sxr8</code>, <code>vwce</code>, <code>spyy</code>) and uppercase for indices (e.g. <code>SP500</code>, <code>FTAW</code>, <code>ACWI</code>). Suppose you have a dataframe <code>funds_data</code> with fund NAVs and a CSV file with index levels. You can import them via:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/add_data_loader.html">add_data_loader</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">fi_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        fwra <span class="op">=</span> <span class="st">"FTAW"</span>,</span>
<span>        webn <span class="op">=</span> <span class="st">"GMLM"</span>,</span>
<span>        vwce <span class="op">=</span> <span class="st">"FTAW"</span>, </span>
<span>        spyy <span class="op">=</span> <span class="st">"ACWI"</span>,</span>
<span>        spyi <span class="op">=</span> <span class="st">"ACWI_IMI"</span>,</span>
<span>        iusq <span class="op">=</span> <span class="st">"ACWI"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="reference/store_timeseries.html">store_timeseries</a></span><span class="op">(</span><span class="st">"funds"</span>, <span class="va">funds_data</span>, fund_index_map <span class="op">=</span> <span class="va">fi_map</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="reference/store_timeseries.html">store_timeseries</a></span><span class="op">(</span><span class="st">"indices"</span>, <span class="fu"><a href="reference/read_timeseries.html">read_timeseries</a></span><span class="op">(</span><span class="st">"indices.csv"</span>, time_unit <span class="op">=</span> <span class="st">"ms"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/run_data_loaders.html">run_data_loaders</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Note:</strong> Dates in the CSV file must be Unix epoch timestamps (in second or millisecond precision), see <a href="https://stantraykov.github.io/fundsr/reference/read_timeseries.html"><code>read_timeseries()</code></a>. If your dates are in another format, get the data via <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_csv()</a></code> and ensure the dates are parsed either via <code>read_csv</code>’s <code>col_types</code> argument or later (e.g. mutate using <code><a href="https://lubridate.tidyverse.org/reference/parse_date_time.html" class="external-link">lubridate::parse_date_time()</a></code>).</p>
</div>
</div>
<div class="section level2">
<h2 id="indices">Indices<a class="anchor" aria-label="anchor" href="#indices"></a>
</h2>
<div class="section level3">
<h3 id="from-fund-files">From fund files<a class="anchor" aria-label="anchor" href="#from-fund-files"></a>
</h3>
<p>Some fund providers’ files include index series. These can be retrieved when importing the fund (supported for iShares, Xtrackers, Invesco), e.g.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/add_data_loader.html">add_data_loader</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="reference/spdr.html">spdr</a></span><span class="op">(</span><span class="st">"SPYY"</span>, benchmark <span class="op">=</span> <span class="st">"ACWI"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="reference/ishs.html">ishs</a></span><span class="op">(</span><span class="st">"IUSQ"</span>, benchmark <span class="op">=</span> <span class="st">"ACWI"</span>, retrieve_benchmark <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># retrieve ACWI (R) from fund file</span></span>
<span>    <span class="fu"><a href="reference/inve.html">inve</a></span><span class="op">(</span><span class="st">"FWRA"</span>, benchmark <span class="op">=</span> <span class="st">"FTAW"</span>, retrieve_benchmark <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># retrieve FTSE All-World (R) from fund file</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Index series retrieved in this way may have holes (e.g. fund domicile holidays and such) that can potentially remove data points for funds that did publish a NAV for that day (e.g. different domicile). The overall effect on plots is negligible, however.</p>
</div>
<div class="section level3">
<h3 id="msci">MSCI<a class="anchor" aria-label="anchor" href="#msci"></a>
</h3>
<p>MSCI provides <a href="https://www-cdn.msci.com/web/msci/index-tools/end-of-day-index-data-search" class="external-link">end-of-day level downloads</a>. These can be imported by the provided <a href="https://stantraykov.github.io/fundsr/reference/msci.html"><code>msci()</code></a> function.</p>
</div>
<div class="section level3">
<h3 id="ftse--solactive">FTSE &amp; Solactive<a class="anchor" aria-label="anchor" href="#ftse--solactive"></a>
</h3>
<p>These index providers make it more difficult to get index levels for free.</p>
</div>
</div>
</div>
<div class="section level1">
<h1 id="disclaimer">Disclaimer<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h1>
<p>This project is provided for informational and analytical purposes (commentary and performance comparison). Charts and statistics shown are derived measures (e.g., tracking differences/return differentials) and are not intended to reproduce or redistribute underlying benchmark or index datasets. Any third-party material, where present, is shown only as necessary for identification and discussion and is provided as low-resolution raster images (not high-resolution or vector graphics) to prevent reuse as a substitute for source data. All trademarks and registered trademarks are the property of their respective owners. References to products, indices, and providers are for identification purposes only and do not imply endorsement or affiliation. Use is intended to fall within applicable copyright exceptions/limitations (such as quotation for criticism/review), to the extent permitted by law.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/StanTraykov/fundsr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/StanTraykov/fundsr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing fundsr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Stanislav Traykov <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/StanTraykov/fundsr/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/StanTraykov/fundsr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stanislav Traykov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
