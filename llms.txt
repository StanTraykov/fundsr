# fundsr

[![R-CMD-check](https://github.com/StanTraykov/fundsr/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/StanTraykov/fundsr/actions/workflows/R-CMD-check.yaml)
[![fundsr status
badge](https://stantraykov.r-universe.dev/fundsr/badges/version)](https://stantraykov.r-universe.dev/fundsr)

fundsr imports fund NAVs and index levels and creates tracking
difference plots (CAGR and log-return). Plotting Xetra liquidity data
(XLM) is also supported.

## Installation

``` r
# install.packages("pak")

# Stable (latest release):
pak::pak("StanTraykov/fundsr@*release")

# Development:
pak::pak("StanTraykov/fundsr")
```

### From my r-universe (binary builds of latest release)

``` r
install.packages(
  "fundsr",
  repos = c("https://stantraykov.r-universe.dev",  "https://cloud.r-project.org")
)
```

## Overview

fundsr is a tool for the DIY investor. It’s not a data provider—you need
to download ETF NAVs and index levels yourself. See the *Getting data*
section in [the project’s
wiki](https://github.com/StanTraykov/fundsr/wiki) for more info. The
package also supports plotting survival curves.

## Usage

- [Importing Data and Computing
  Differences](https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html)
- [Simple Demo Using Real
  Data](https://stantraykov.github.io/fundsr/articles/simple-demo-using-real-data.html)
- [Survival Curves for Financial
  Planning](https://stantraykov.github.io/fundsr/articles/survival-curves-for-financial-planning.html)
- `scripts/examples` in the package directory (locate via
  `system.file("scripts/examples", package="fundsr")`)
  - `glob_funds.R` is an example workflow plotting global funds, but
    data needs to be downloaded separately
  - `all_funds.R` features many more funds
- [Options](https://stantraykov.github.io/fundsr/reference/fundsr_options.html)
- [Reference](https://stantraykov.github.io/fundsr/reference/index.html)

## Output

![combined plots](reference/figures/example-plot.png)

combined plots

## Disclaimer

This project is provided for informational and analytical purposes
(commentary and performance comparison). Charts and statistics shown are
derived measures (e.g., tracking differences/return differentials) and
are not intended to reproduce or redistribute underlying benchmark or
index datasets. Any third-party material, where present, is shown only
as necessary for identification and discussion and is provided as
low-resolution raster images (not high-resolution or vector graphics) to
prevent reuse as a substitute for source data. All trademarks and
registered trademarks are the property of their respective owners.
References to products, indices, and providers are for identification
purposes only and do not imply endorsement or affiliation. Use is
intended to fall within applicable copyright exceptions/limitations
(such as quotation for criticism/review), to the extent permitted by
law.

# Package index

## Config functions

- [`fundsr_options()`](https://stantraykov.github.io/fundsr/reference/fundsr_options.md)
  : Set fundsr package options
- [`reset_state()`](https://stantraykov.github.io/fundsr/reference/reset_state.md)
  : Clear fundsr session state

## Download functions

- [`add_fund_urls()`](https://stantraykov.github.io/fundsr/reference/add_fund_urls.md)
  : Add entries to the fund download list
- [`download_fund_data()`](https://stantraykov.github.io/fundsr/reference/download_fund_data.md)
  : Download fund data according to the configured download list

## Fund/index file readers

- [`read_msci_tsv()`](https://stantraykov.github.io/fundsr/reference/read_msci_tsv.md)
  : Read an MSCI two-column TSV file
- [`read_timeseries()`](https://stantraykov.github.io/fundsr/reference/read_timeseries.md)
  : Read a time series file (CSV/TSV) with a date + one or more value
  columns
- [`read_timeseries_excel()`](https://stantraykov.github.io/fundsr/reference/read_timeseries_excel.md)
  : Read a time series from an Excel workbook

## Fund/index workflow functions

- [`add_data_loader()`](https://stantraykov.github.io/fundsr/reference/add_data_loader.md)
  : Register a data loader
- [`build_all_series()`](https://stantraykov.github.io/fundsr/reference/build_all_series.md)
  : Run all registered data loaders and join all loaded series into a
  big tibble.
- [`clear_data_loaders()`](https://stantraykov.github.io/fundsr/reference/clear_data_loaders.md)
  : Clear registered data loaders
- [`clear_storage()`](https://stantraykov.github.io/fundsr/reference/clear_storage.md)
  : Clear storage
- [`get_storage()`](https://stantraykov.github.io/fundsr/reference/get_storage.md)
  : Get the internal fund storage
- [`join_env()`](https://stantraykov.github.io/fundsr/reference/join_env.md)
  : Join all data frames in an environment with optional late joins
- [`load_fund()`](https://stantraykov.github.io/fundsr/reference/load_fund.md)
  : Load a fund's NAV data and optionally register its benchmark mapping
- [`run_data_loaders()`](https://stantraykov.github.io/fundsr/reference/run_data_loaders.md)
  : Run registered data loaders
- [`store_timeseries()`](https://stantraykov.github.io/fundsr/reference/store_timeseries.md)
  : Store a cached object in the package storage environment

## Fund-index map functions

- [`add_fund_index_map()`](https://stantraykov.github.io/fundsr/reference/add_fund_index_map.md)
  : Add to fund-index map
- [`clear_fund_index_map()`](https://stantraykov.github.io/fundsr/reference/clear_fund_index_map.md)
  : Clear fund-index map
- [`get_fund_index_map()`](https://stantraykov.github.io/fundsr/reference/get_fund_index_map.md)
  : Get the internal fund index map

## Provider wrappers

- [`amun()`](https://stantraykov.github.io/fundsr/reference/amun.md) :
  Import an Amundi fund
- [`avan()`](https://stantraykov.github.io/fundsr/reference/avan.md) :
  Import an Avantis fund
- [`bnpp()`](https://stantraykov.github.io/fundsr/reference/bnpp.md) :
  Import an BNP Paribas fund
- [`hsbc()`](https://stantraykov.github.io/fundsr/reference/hsbc.md) :
  Import an HSBC fund
- [`inve()`](https://stantraykov.github.io/fundsr/reference/inve.md) :
  Import an Invesco fund
- [`ishs()`](https://stantraykov.github.io/fundsr/reference/ishs.md) :
  Import an iShares fund
- [`msci()`](https://stantraykov.github.io/fundsr/reference/msci.md) :
  Import an MSCI index sheet and register benchmark mappings
- [`spdr()`](https://stantraykov.github.io/fundsr/reference/spdr.md) :
  Import an SPDR fund
- [`ubs()`](https://stantraykov.github.io/fundsr/reference/ubs.md) :
  Import a UBS fund
- [`vang()`](https://stantraykov.github.io/fundsr/reference/vang.md) :
  Import a Vanguard fund
- [`xtra()`](https://stantraykov.github.io/fundsr/reference/xtra.md) :
  Import an Xtrackers fund

## Rolling-difference functions

- [`plot_roll_diffs()`](https://stantraykov.github.io/fundsr/reference/plot_roll_diffs.md)
  : Plot rolling return differences against benchmark
- [`roll_diffs()`](https://stantraykov.github.io/fundsr/reference/roll_diffs.md)
  : Compute rolling annualized tracking difference statistics

## Plot export utilities

- [`clear_inkscape_queue()`](https://stantraykov.github.io/fundsr/reference/clear_inkscape_queue.md)
  : Clear queued Inkscape exports
- [`export_pngs()`](https://stantraykov.github.io/fundsr/reference/export_pngs.md)
  : Export queued SVGs to PNG via Inkscape
- [`run_plots()`](https://stantraykov.github.io/fundsr/reference/run_plots.md)
  : Generate and export rolling-difference and XLM plots from a
  specification
- [`save_plot()`](https://stantraykov.github.io/fundsr/reference/save_plot.md)
  : Save a plot as SVG and/or PNG and queue for Inkscape conversion

## XLM functions

- [`plot_xlms()`](https://stantraykov.github.io/fundsr/reference/plot_xlms.md)
  : Plot Xetra Liquidity Measure (XLM) time series
- [`read_xlm_directory()`](https://stantraykov.github.io/fundsr/reference/read_xlm_directory.md)
  : Read and combine XLM data from multiple Xetra XLSX files

## Survival-curve functions

- [`chance_alive()`](https://stantraykov.github.io/fundsr/reference/chance_alive.md)
  : Compute conditional survival (chance alive) by age
- [`chance_alive_es_aasmr()`](https://stantraykov.github.io/fundsr/reference/chance_alive_es_aasmr.md)
  : Compute cohort-style survival from Eurostat EUROPOP2023 mortality
  assumptions
- [`plot_chance_alive()`](https://stantraykov.github.io/fundsr/reference/plot_chance_alive.md)
  : Plot chance alive by age
- [`plot_chance_alive_es_aasmr()`](https://stantraykov.github.io/fundsr/reference/plot_chance_alive_es_aasmr.md)
  : Plot cohort-style survival from Eurostat EUROPOP2023 assumptions
- [`read_es_aasmr()`](https://stantraykov.github.io/fundsr/reference/read_es_aasmr.md)
  : Read Eurostat EUROPOP2023 mortality-assumption table (proj_23naasmr)
- [`read_life_table()`](https://stantraykov.github.io/fundsr/reference/read_life_table.md)
  : Read HMD period life tables (1x1) from disk

# Articles

### All vignettes

- [Importing Data and Computing Differences in
  fundsr](https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.md):
- [Simple Demo Using Real
  Data](https://stantraykov.github.io/fundsr/articles/simple-demo-using-real-data.md):
- [Survival Curves for Financial
  Planning](https://stantraykov.github.io/fundsr/articles/survival-curves-for-financial-planning.md):
