% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/read_text.R
\name{read_timeseries}
\alias{read_timeseries}
\title{Read a time series file (CSV/TSV) with a date + one or more value columns}
\usage{
read_timeseries(
  file,
  date_col = "date",
  time_unit = c("ms", "s", "us", "ns"),
  orders = NULL,
  force_text_date = FALSE,
  filter_regex = NULL
)
}
\arguments{
\item{file}{Filename to read (relative to \code{fundsr.data_dir} option).}

\item{date_col}{Name of the date column in the file.}

\item{time_unit}{Character scalar giving the unit of a \emph{numeric} date column
(Unix epoch). One of \code{"ms"} (default), \code{"s"}, \code{"us"}, \code{"ns"}.}

\item{orders}{Character vector of lubridate parsing orders for a \emph{text} date
column (passed to \code{\link[lubridate:parse_date_time]{lubridate::parse_date_time()}}). If \code{NULL}, a default set
of common dmy-order formats is used.}

\item{force_text_date}{Logical scalar. If \code{TRUE}, the date column is always
parsed as text using \code{orders} (no Unix-epoch numeric interpretation is
attempted).}

\item{filter_regex}{Optional regular expression used to pre-filter the raw
file by lines before parsing. If supplied, the file is read with
\code{\link[readr:read_lines]{readr::read_lines()}} and only lines matching \code{filter_regex} are kept. The
regex must match both data lines and the header line, e.g.
\code{"^[0-9]|^Date,"}}
}
\value{
A tibble with parsed date column and numeric value columns.
}
\description{
Loads a delimited file from the directory specified by \code{fundsr.data_dir},
parses the date column into a proper \code{Date}, and coerces all other columns
to numeric.
}
\details{
The reader is chosen by file extension: \code{.csv} uses \code{\link[readr:read_delim]{readr::read_csv()}} and
\code{.tsv}/\code{.tab}/\code{.txt} uses \code{\link[readr:read_delim]{readr::read_tsv()}}. Gzipped variants such as
\code{.csv.gz} and \code{.tsv.gz} are also supported.

The function assumes a date column exists (default: \code{date}). By default, if
the date column looks numeric (i.e., coercion to numeric yields at least one
non-\code{NA}), it is interpreted as a Unix timestamp (scaled by \code{time_unit}).
Otherwise it is parsed as text using \code{orders}. If \code{force_text_date = TRUE},
it is always parsed as text using \code{orders}.

All non-date columns are coerced with \code{as.numeric()} (non-parsable values
become \code{NA}).
}
\seealso{
Other fund/index file readers: 
\code{\link{read_msci_tsv}()},
\code{\link{read_timeseries_excel}()}
}
\concept{fund/index file readers}
