<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Join all data frames in an environment with optional late joins — join_env • fundsr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Join all data frames in an environment with optional late joins — join_env"><meta name="description" content='Performs a dplyr::full_join() across all objects in an environment, except those listed in
late. Objects listed in late are instead joined afterwards using dplyr::left_join() (or
another function specified by late_join) in the order given. Column clashes during the full
join are resolved via join suffixes c(".x", ".y") while the late joins use
c(".early", ".late"). Optionally, columns with join suffixes can be automatically coalesced
into single unsuffixed columns via precedence specification (join_precedence).'><meta property="og:description" content='Performs a dplyr::full_join() across all objects in an environment, except those listed in
late. Objects listed in late are instead joined afterwards using dplyr::left_join() (or
another function specified by late_join) in the order given. Column clashes during the full
join are resolved via join suffixes c(".x", ".y") while the late joins use
c(".early", ".late"). Optionally, columns with join suffixes can be automatically coalesced
into single unsuffixed columns via precedence specification (join_precedence).'><meta property="og:image" content="https://stantraykov.github.io/fundsr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fundsr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/importing-and-computing-differences.html">Importing Data and Computing Differences in fundsr</a></li>
    <li><a class="dropdown-item" href="../articles/simple-demo-using-real-data.html">Simple Demo Using Real Data</a></li>
    <li><a class="dropdown-item" href="../articles/survival-curves-for-financial-planning.html">Survival Curves for Financial Planning</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/StanTraykov/fundsr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Join all data frames in an environment with optional late joins</h1>
      <small class="dont-index">Source: <a href="https://github.com/StanTraykov/fundsr/blob/main/R/storage.R" class="external-link"><code>R/storage.R</code></a></small>
      <div class="d-none name"><code>join_env.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Performs a <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::full_join()</a></code> across all objects in an environment, except those listed in
<code>late</code>. Objects listed in <code>late</code> are instead joined afterwards using <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::left_join()</a></code> (or
another function specified by <code>late_join</code>) in the order given. Column clashes during the full
join are resolved via join suffixes <code>c(".x", ".y")</code> while the late joins use
<code>c(".early", ".late")</code>. Optionally, columns with join suffixes can be automatically coalesced
into single unsuffixed columns via precedence specification (<code>join_precedence</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">join_env</span><span class="op">(</span></span>
<span>  <span class="va">env</span>,</span>
<span>  by <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  late <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  join_precedence <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  coalesce_suffixed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  late_join <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-env">env<a class="anchor" aria-label="anchor" href="#arg-env"></a></dt>
<dd><p>Environment containing the data frames to join.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>Character vector of join keys (passed to <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::full_join()</a></code>).</p></dd>


<dt id="arg-late">late<a class="anchor" aria-label="anchor" href="#arg-late"></a></dt>
<dd><p>Character vector of object names in <code>env</code> that should be
<em>excluded</em> from the initial full join and instead left-joined
afterwards. Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-join-precedence">join_precedence<a class="anchor" aria-label="anchor" href="#arg-join-precedence"></a></dt>
<dd><p>Optional character vector of length 2 giving join suffixes to coalesce
(for example, <code>c(".early", ".late")</code> or <code>c(".late", ".early")</code>). When non-<code>NULL</code>, any pairs of
columns whose names end in these suffixes (and share the same base name) are replaced by a
single unsuffixed column containing the coalesced values, preferring the left suffix when both
values are available. If <code>NULL</code> (the default), no automatic coalescing is performed.</p></dd>


<dt id="arg-coalesce-suffixed">coalesce_suffixed<a class="anchor" aria-label="anchor" href="#arg-coalesce-suffixed"></a></dt>
<dd><p>Deprecated; use <code>join_precedence</code>.</p></dd>


<dt id="arg-late-join">late_join<a class="anchor" aria-label="anchor" href="#arg-late-join"></a></dt>
<dd><p>Function to use for joining late objects.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble: the full join of all non-late objects, followed by sequential left-joins (or
other joins specified by <code>late_join</code>) of the late objects. If <code>join_precedence</code> is supplied,
suffixed join columns are coalesced into unsuffixed base columns as described above.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other fund/index workflow functions:
<code><a href="add_data_loader.html">add_data_loader()</a></code>,
<code><a href="build_all_series.html">build_all_series()</a></code>,
<code><a href="clear_data_loaders.html">clear_data_loaders()</a></code>,
<code><a href="clear_storage.html">clear_storage()</a></code>,
<code><a href="get_storage.html">get_storage()</a></code>,
<code><a href="load_fund.html">load_fund()</a></code>,
<code><a href="run_data_loaders.html">run_data_loaders()</a></code>,
<code><a href="store_timeseries.html">store_timeseries()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  <span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">new.env</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">e</span><span class="op">$</span><span class="va">members</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/band_members.html" class="external-link">band_members</a></span></span></span>
<span class="r-in"><span>  <span class="va">e</span><span class="op">$</span><span class="va">instruments</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/band_members.html" class="external-link">band_instruments</a></span></span></span>
<span class="r-in"><span>  <span class="va">e</span><span class="op">$</span><span class="va">other_instr</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/band_members.html" class="external-link">band_instruments</a></span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>plays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"banjo"</span>, <span class="st">"mellotron"</span>, <span class="st">"harpsichord"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/add_row.html" class="external-link">add_row</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Mick"</span>, plays <span class="op">=</span> <span class="st">"harmonica"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/add_row.html" class="external-link">add_row</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Stu"</span>, plays <span class="op">=</span> <span class="st">"piano"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">full</span> <span class="op">&lt;-</span> <span class="fu">join_env</span><span class="op">(</span><span class="va">e</span>, by <span class="op">=</span> <span class="st">"name"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">late</span> <span class="op">&lt;-</span> <span class="fu">join_env</span><span class="op">(</span><span class="va">e</span>, by <span class="op">=</span> <span class="st">"name"</span>, late <span class="op">=</span> <span class="st">"other_instr"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">late_coalesced</span> <span class="op">&lt;-</span> <span class="fu">join_env</span><span class="op">(</span><span class="va">e</span>,</span></span>
<span class="r-in"><span>                             by <span class="op">=</span> <span class="st">"name"</span>,</span></span>
<span class="r-in"><span>                             late <span class="op">=</span> <span class="st">"other_instr"</span>,</span></span>
<span class="r-in"><span>                             join_precedence <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".early"</span>, <span class="st">".late"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>full <span class="op">=</span> <span class="va">full</span>, late <span class="op">=</span> <span class="va">late</span>, late_coalesced <span class="op">=</span> <span class="va">late_coalesced</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $full</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name  plays.x plays.y     band   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> John  guitar  banjo       Beatles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Paul  bass    mellotron   Beatles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Keith guitar  harpsichord <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Mick  <span style="color: #BB0000;">NA</span>      harmonica   Stones </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Stu   <span style="color: #BB0000;">NA</span>      piano       <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $late</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name  plays.early band    plays.late </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> John  guitar      Beatles banjo      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Paul  bass        Beatles mellotron  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Keith guitar      <span style="color: #BB0000;">NA</span>      harpsichord</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Mick  <span style="color: #BB0000;">NA</span>          Stones  harmonica  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $late_coalesced</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name  band    plays    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> John  Beatles guitar   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Paul  Beatles bass     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Keith <span style="color: #BB0000;">NA</span>      guitar   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Mick  Stones  harmonica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stanislav Traykov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

