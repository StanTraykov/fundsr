<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot rolling return differences against benchmark — plot_roll_diffs • fundsr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot rolling return differences against benchmark — plot_roll_diffs"><meta name="description" content="Plots rolling annualized tracking differences (CAGR-style or log-return) for
selected funds against their benchmark series. The plot uses quantile-based
y-limits and formats the y-axis in basis points."><meta property="og:description" content="Plots rolling annualized tracking differences (CAGR-style or log-return) for
selected funds against their benchmark series. The plot uses quantile-based
y-limits and formats the y-axis in basis points."><meta property="og:image" content="https://stantraykov.github.io/fundsr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fundsr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/importing-and-computing-differences.html">Importing Data and Computing Differences in fundsr</a></li>
    <li><a class="dropdown-item" href="../articles/simple-demo-using-real-data.html">Simple Demo Using Real Data</a></li>
    <li><a class="dropdown-item" href="../articles/survival-curves-for-financial-planning.html">Survival Curves for Financial Planning</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/StanTraykov/fundsr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot rolling return differences against benchmark</h1>
      <small class="dont-index">Source: <a href="https://github.com/StanTraykov/fundsr/blob/v0.4.0/R/plot_roll_diffs.R" class="external-link"><code>R/plot_roll_diffs.R</code></a></small>
      <div class="d-none name"><code>plot_roll_diffs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Plots rolling annualized tracking differences (CAGR-style or log-return) for
selected funds against their benchmark series. The plot uses quantile-based
y-limits and formats the y-axis in basis points.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_roll_diffs</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">n_days</span>,</span>
<span>  <span class="va">funds</span>,</span>
<span>  use_log <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  gg_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  title_add <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date_brk <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  qprob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.005</span>, <span class="fl">0.995</span><span class="op">)</span>,</span>
<span>  bmark_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"net"</span>, <span class="st">"gross"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Input data frame containing a <code>date</code> column and one rolling-difference
column per fund (specified by <code>funds</code>).</p></dd>


<dt id="arg-n-days">n_days<a class="anchor" aria-label="anchor" href="#arg-n-days"></a></dt>
<dd><p>Window length (in days) used to compute rolling differences (used
for labelling).</p></dd>


<dt id="arg-funds">funds<a class="anchor" aria-label="anchor" href="#arg-funds"></a></dt>
<dd><p>Character vector of fund column names to include.</p></dd>


<dt id="arg-use-log">use_log<a class="anchor" aria-label="anchor" href="#arg-use-log"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, labels the plot as log-return differences.
If <code>FALSE</code>, labels the plot as CAGR differences.</p></dd>


<dt id="arg-gg-params">gg_params<a class="anchor" aria-label="anchor" href="#arg-gg-params"></a></dt>
<dd><p>Optional ggplot components to add to the plot.</p></dd>


<dt id="arg-title-add">title_add<a class="anchor" aria-label="anchor" href="#arg-title-add"></a></dt>
<dd><p>Optional title suffix. Can be a single string or a named
character vector specifying the title in multiple languages (e.g. <code>c(en=..., bg=...)</code>).</p></dd>


<dt id="arg-date-brk">date_brk<a class="anchor" aria-label="anchor" href="#arg-date-brk"></a></dt>
<dd><p>Optional date-break specification for the x-axis (e.g. <code>"3 months"</code>).
If <code>NULL</code>, it is chosen automatically based on the time span and available data.</p></dd>


<dt id="arg-qprob">qprob<a class="anchor" aria-label="anchor" href="#arg-qprob"></a></dt>
<dd><p>Two-element numeric vector giving lower and upper quantiles used
to set the baseline y-axis limits. Defaults to <code>c(0.005, 0.995)</code>.</p></dd>


<dt id="arg-bmark-type">bmark_type<a class="anchor" aria-label="anchor" href="#arg-bmark-type"></a></dt>
<dd><p>Benchmark type used in the title: <code>"net"</code> or <code>"gross"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A ggplot object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function reshapes <code>data</code> to long format and produces a scatter plot coloured
by fund. The y-axis limits are primarily determined from quantiles of the rolling
differences (as specified by <code>qprob</code>), always including 0.</p>
<p>To avoid clipping recent extremes, the y-limits are expanded (if needed) to also
include the full range observed in the most recent 30 days of data, even when
those values fall outside the <code>qprob</code> quantiles.</p>
<p>The x-axis breaks are chosen as follows when <code>date_brk</code> is <code>NULL</code>: for spans of
up to 3 years, breaks default to <code>"3 months"</code>. For longer spans, breaks are
anchored to calendar months (semiannual or quarterly depending on span) and
are included only when the data range extends beyond the midpoint to the
neighboring break.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other rolling difference functions:
<code><a href="roll_diffs.html">roll_diffs()</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stanislav Traykov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

