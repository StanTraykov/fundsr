[{"path":"https://stantraykov.github.io/fundsr/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2026 Stanislav Traykov Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"the-master-table","dir":"Articles","previous_headings":"","what":"The master table","title":"Importing Data and Computing Differences in fundsr","text":"fundsr’s core workflow (Figure 1) consists reading daily fund NAVs index levels files building master series table. Plottable tracking differences computed table via roll_diffs(). Figure 1: Rolling differences workflow master table date column named date one column per series (either fund NAVs net/gross index levels; see Table 1 example). Fund NAV columns use lowercase names convention (e.g. spyy). Index level columns typically uppercase (e.g. ACWI, GMLM, SP500) mixed-case initial uppercase letter (e.g. WxUSA). Net total return levels stored shortened index name, gross total return levels identified -GR suffix (e.g. ACWI-GR, SP500-GR). Note: lowercase naming useful fund identifiers (typically tickers) may coincide index names (e.g. Amundi’s ACWI). -GR suffix default value gross_suffix parameter roll_diffs(), used switch net gross calculations. IMPORTANT: NAV histories accumulating funds valid inputs, equivalent total return series. fundsr support total return calculation distributing ETFs using NAVs produce garbage. (aware free source comprehensive distribution histories UCITS ETFs allow reconstruction total return.) Table 1: master series table (illustrative example; values rounded)","code":""},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Importing Data and Computing Differences in fundsr","text":"fundsr_options() can used set (sanity-check) package options. fundsr reads fund NAVs index levels single directory specified via fundsr.data_dir option. following code sets extdata directory shipped package. plot output directory set output (option fundsr.out_dir). Note: normal use, fundsr may also write data directory, download_fund_data() used.","code":"library(dplyr) library(ggplot2) library(lubridate)  library(fundsr) fundsr_options(     data_dir = system.file(\"extdata\", package = \"fundsr\"),     out_dir = \"output\", # where to store plots     export_svg = TRUE, # output SVG (main workflow)          px_width = 1300, # for optional PNG output     # internal_png = TRUE, # output PNG using ggplot2      # Need to set path only if auto-detection fails         # inkscape = \"path/to\" # optional PNG output via Inkscape )"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"importing","dir":"Articles","previous_headings":"","what":"Importing","title":"Importing Data and Computing Differences in fundsr","text":"Importing usually involves reading fund NAVs index levels Excel, CSV, TSV files data frames storing fundsr’s cached storage environment, master table constructed (typically via single call build_all_series()). fund→index map, required tracking-difference calculations, maintained updated new series added. example files Table 2 (shipped package extdata) used demonstrate importing functions. Table 2: Example input files","code":""},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"store_timeseries","dir":"Articles","previous_headings":"Importing","what":"store_timeseries()","title":"Importing Data and Computing Differences in fundsr","text":"store_timeseries() basic function importing storage environment. commonly used via wrappers load_fund() vendor-specific wrappers around load_fund()—handling Excel NAV histories Amundi, HSBC, Invesco, iShares, SPDR, UBS, Vanguard, Xtrackers. often called directly importing CSV/TSV files data frames. example fund GNDB NAV history CSV format dates expressed milliseconds since Unix epoch, NAV column, Benchmark column imported fund file example. GNDB’s NAV data can loaded fundsr’s storage environment reading tibble via read_timeseries(). read_timeseries() recognizes date format, parses dates, renames date column date, required master table. NAV column CSV file renamed separately lowercase fund identifier master table. select() middle pipeline ensures extraneous Benchmark column included (import benchmark later file). variable name used storage environment (var_name) can chosen arbitrarily serves cache key. fund_index_map parameter defines mapping fund identifier corresponding index identifier. Note: make use caching, expression supplied via expr parameter contain ready-made tibble similar, constructed outside call. contain function call pipeline performs potentially costly operations, like loading Excel, Internet, etc. var_name already present fundsr’s storage environment, expression evaluated time store_timeseries() call, unless reload requested overwrite parameter store_timeseries() TRUE. (See Using data loaders Resetting reloading.) loading gross indices, convention map net index fund_index_map (e.g. SP500-GR→SP500). allows gross indices plotted net indices. plotted net index, gross index serves reference equivalent ETF perfect tracking, withholding taxes, ongoing fees. following code block uses store_timeseries() load IDX1 IDX2 indices, tracked example funds. read_timeseries_excel() flexibly reads Excel files accepts col_trans argument translate Excel columns (matched using regular expressions) imported columns. IDX2 imported single variable (idx2) joining net gross time series (via dplyr::full_join()). columns IDX2{N,G}.csv already appropriately named master table. Importing files separate variables via two calls store_timeseries() lead master table.","code":"Date,NAV,Benchmark 1704067200000,100,100 1704153600000,101.595595,101.588368 1704240000000,100.510764,100.494977 store_timeseries(     var_name = \"gndb\",     expr = read_timeseries(\"GNDB.csv\", date_col = \"Date\") |>         select(date, NAV) |>         rename(gndb = NAV),     fund_index_map = c(gndb = \"IDX2\") ) store_timeseries(     var_name = \"idx1\",     expr = read_timeseries_excel(         file = \"IDX1.xlsx\",         sheet = 1,         date_col = \"^Date\",         col_trans = c(\"IDX1\"    = \"^Index One Net\",                       \"IDX1-GR\" = \"^Index One Gross\"),         date_order = \"dmy\"     ),     fund_index_map = c(`IDX1-GR` = \"IDX1\") ) #> Reading Excel: '/tmp/RtmpNHTwCB/temp_libpath1d696685a5d/fundsr/extdata/IDX1.xlsx'  store_timeseries(     var_name = \"idx2\",     expr = full_join(read_timeseries(\"IDX2N.csv\"),                      read_timeseries(\"IDX2G.csv\"),                      by = \"date\"),     fund_index_map = c(`IDX2-GR` = \"IDX2\") )"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"load_fund","dir":"Articles","previous_headings":"Importing","what":"load_fund()","title":"Importing Data and Computing Differences in fundsr","text":"load_fund() reads Excel file fund NAVs storage environment (calls store_timeseries() expression uses read_timeseries_excel()). accepts regular expressions identifying date NAV columns sheet (name number) selecting worksheet within Excel workbook contains NAV history. default values date_col = \"^Date\", nav_col = \"^NAV\", sheet = 1 (works single-sheet workbooks). first argument (usually fund ticker), converted lowercase, used variable name store_timeseries() tibble column name eventually propagate master table. benchmark argument provides fund→index mapping. Figure 2: Excel file FNDA NAV history FNDA provided Excel workbook multiple sheets date column named “” (Figure 2). defaults sheet, date_col, nav_col match file layout, must specify relevant parameters. used reliably locate NAV date ranges even sheet contains extraneous rows columns around data (common fund-manager files). file, sheet date_col required; nav_col optional default still match. load_fund() recognizes proper Excel dates, improperly stored Excel dates, large number text date formats used fund files, date order (e.g. \"dmy\", \"mdy\", \"ymd\") must known interpretation text dates. defaults \"dmy\" common UCITS ETF NAV histories. FNDB text dates MM/DD/YYYY format, supplying date_order = \"mdy\" required. final fund load GNDA.","code":"load_fund(\"FNDA\",           \"FNDA.xlsx\",           benchmark = \"IDX1\",           sheet = \"historical\",           date_col = \"^As Of\",           nav_col = \"^NAV\") #> Reading Excel: '/tmp/RtmpNHTwCB/temp_libpath1d696685a5d/fundsr/extdata/FNDA.xlsx' load_fund(\"FNDB\",           \"FNDB.xlsx\",           benchmark = \"IDX1\",           date_col = \"^date\",           nav_col = \"^net asset val\",           date_order = \"mdy\") #> Reading Excel: '/tmp/RtmpNHTwCB/temp_libpath1d696685a5d/fundsr/extdata/FNDB.xlsx' load_fund(\"GNDA\",           \"GNDA.xlsx\",           benchmark = \"IDX2\",           date_col = \"^Date\",           nav_col = \"^Official NAV\") #> Reading Excel: '/tmp/RtmpNHTwCB/temp_libpath1d696685a5d/fundsr/extdata/GNDA.xlsx'"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"building-the-master-table","dir":"Articles","previous_headings":"Importing","what":"Building the master table","title":"Importing Data and Computing Differences in fundsr","text":"First, verify funds indices previous sections loaded storage environment, columns follow naming convention: lowercase funds uppercase (initial uppercase) indices. build_all_series() joins tibbles (types data frames) storage environment single tibble—master series table. master_series now tibble resembling Table 3. fndb column contains NA values initial rows due FNDB launching 2024-03-16 (first NAV date Excel file). Table 3: Resulting series table (excerpt)","code":"s <- get_storage() ls(s) #> [1] \"fnda\" \"fndb\" \"gnda\" \"gndb\" \"idx1\" \"idx2\" for (v in ls(s)) {     print(as.data.frame(slice_head(s[[v]], n = 2))) } #>         date     fnda #> 1 2024-01-01 100.0000 #> 2 2024-01-02 101.4624 #>         date     fndb #> 1 2024-03-16 106.2136 #> 2 2024-03-17 104.2975 #>         date     gnda #> 1 2024-01-01 100.0000 #> 2 2024-01-02 101.5749 #>         date     gndb #> 1 2024-01-01 100.0000 #> 2 2024-01-02 101.5956 #>         date     IDX1  IDX1-GR #> 1 2024-01-01 100.0000 100.0000 #> 2 2024-01-02 101.4753 101.4767 #>         date     IDX2 IDX2-GR #> 1 2024-01-01 100.0000  100.00 #> 2 2024-01-02 101.5884  101.59 master_series <- build_all_series()"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"advanced-joining","dir":"Articles","previous_headings":"Importing > Building the master table","what":"Advanced joining","title":"Importing Data and Computing Differences in fundsr","text":"multiple sources series values need coalesced single column, series can loaded column name different variables storage environment. building series, one can designated late.","code":"# load fund NAVs, uses default \"acme\" for column and storage variable load_fund(\"ACME\",           file = \"ACME1.xlsx\",           date_col = \"As Of\")  # also load NAVs into \"acme\" column, but storage variable is \"acme2\" load_fund(\"ACME\",           var_name = \"acme2\",           file = \"ACME2.xlsx\",           date_col = \"As Of\")  # join \"acme\" and \"acme2\" # both columns will be available, named \"acme.late\" and \"acme.early\" series <- build_all_series(late = \"acme2\")  # join and coalesce # on dates where both columns have values, prefer \"acme2\" series <- build_all_series(late = \"acme2\",                            join_precedence = c(\".late\", \".early\"))  # as above, but instead of the default left join, perform a full join series <- build_all_series(late = \"acme2\",                            join_precedence = c(\".late\", \".early\"),                            late_join = dplyr::full_join)"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"vendor-specific-wrappers","dir":"Articles","previous_headings":"Importing","what":"Vendor-specific wrappers","title":"Importing Data and Computing Differences in fundsr","text":"following wrappers use load_fund() import Excel files provided fund managers. amun() (Amundi) hsbc() (HSBC) inve() (Invesco) ishs() (iShares) spdr() (SPDR) ubs() (UBS) vang() (Vanguard) xtra() (Xtrackers) Example usage: Note: MSCI Excel downloads can imported via msci(). MSCI TSV files (download format leveraged indices) can read via read_msci_tsv().","code":"xtra(\"EXUS\", benchmark = \"WxUSA\",      file = \"HistoricalData-IE0006WW1TQ4.xlsx\") xtra(\"EXUS\", benchmark = \"WxUSA\") # assumes EXUS.xls[x]"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"downloading-nav-histories","dir":"Articles","previous_headings":"Importing","what":"Downloading NAV histories","title":"Importing Data and Computing Differences in fundsr","text":"fundsr can download Excel files iShares SPDR. Funds URLs can set via add_fund_urls(). Downloaded files stored data directory (fundsr.data_dir option) SPYY.xlsx, etc. allows easy importing via vendor-specific wrappers.","code":"add_fund_urls(c(     SPYY = \"https://www.ssga.com/ie/en_gb/institutional/library-content/products/fund-data/etfs/emea/navhist-emea-en-spyy-gy.xlsx\",     IUSQ = \"https://www.ishares.com/uk/individual/en/products/251850/ishares-msci-acwi-ucits-etf/1535604580409.ajax?fileType=xls&fileName=iShares-MSCI-ACWI-UCITS-ETF-USD-Acc_fund&dataType=fund\" )) # do not redownload existing files (the default) download_fund_data(redownload = FALSE)  spdr(\"SPYY\", benchmark = \"ACWI\") # assumes SPYY.xls[x] ishs(\"IUSQ\", benchmark = \"ACWI\")  series <- build_all_series()"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"retrieving-benchmarks-from-fund-files","dir":"Articles","previous_headings":"Importing","what":"Retrieving benchmarks from fund files","title":"Importing Data and Computing Differences in fundsr","text":"fund managers include benchmark return series Excel downloads. fundsr can retrieve benchmark via retrieve_benchmark parameter (supported Invesco, iShares, Xtrackers). Note: Benchmark series fund files may missing values. available, data files index provider preferred.","code":"ishs(\"IUSQ\", benchmark = \"ACWI\", retrieve_benchmark = TRUE)"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"using-data-loaders","dir":"Articles","previous_headings":"Importing","what":"Using data loaders","title":"Importing Data and Computing Differences in fundsr","text":"joining data frames storage environment, build_all_series() calls run_data_loaders() invokes registered data loaders. Instead directly calling store_timeseries(), load_fund(), etc., complex workflows register functions data loaders via add_data_loader(). script setting funds tracking MSCI ACWI following. Note: Data loaders calling store_timeseries() directly make use caching mechanic provide costly operations (file reads, downloads) second (expr) parameter store_timeseries(). parameter evaluated data loader run, unless variable missing storage environment reload requested. example data loader handling funds index data shown following code block. Call registered data loaders build master series table joining objects storage environment. call registered loaders, without joining objects. Returns storage environment (also available directly via get_storage()). Build master table without running data loaders.","code":"add_fund_urls(c(     IUSQ = \"https://...\",     SPYY = \"https://...\", )) download_fund_data() # download only missing files  add_data_loader(function() {     # downloaded via download_fund_data()     spdr(\"SPYY\", benchmark = \"ACWI\")     ishs(\"IUSQ\", benchmark = \"ACWI\",          retrieve_benchmark = TRUE)     # manual download     xtra(\"SCWX\", benchmark = \"ACWI\",          file = \"HistoricalData-LU2903252349.xlsx\") }) add_data_loader(function() {     ### Indices     # Solactive GBS GM L&M Cap     store_timeseries(\"gmlm\", read_timeseries(\"GMLM.csv\"))     store_timeseries(\"gmlm-gr\", read_timeseries(\"GMLM-GR.csv\"),                      fund_index_map = c(`GMLM-GR` = \"GMLM\"))     # FTSE All-World     store_timeseries(\"ftaw\", read_timeseries(\"FTAW.csv\"),                      fund_index_map = c(`FTAW-GR` = \"FTAW\"))     # MSCI ACWI and ACWI IMI     msci(var_name = \"msci-nt\",          col_trans = c(ACWI = \"^ACWI Standard\",                        ACWI_IMI = \"^ACWI IMI\"),          file = \"MSCI-NT.xls\")     msci(var_name = \"msci-gr\",          col_trans = c(`ACWI-GR` = \"^ACWI Standard\",                        `ACWI_IMI-GR` = \"^ACWI IMI\"),          benchmarks = c(`ACWI-GR` = \"ACWI\",                         `ACWI_IMI-GR` = \"ACWI_IMI\"),          file = \"MSCI-GR.xls\")     ### Funds     # manual downloads     amun(\"WEBN\", benchmark = \"GMLM\",          file = \"NAV History_Amundi_WEBN.xlsx\")     vang(\"VWCE\", benchmark = \"FTAW\",          file = \"Vanguard FTSE All-World UCITS.xlsx\")     xtra(\"SCWX\", benchmark = \"ACWI\",          file = \"HistoricalData-LU2903252349.xlsx\")     inve(\"FWRA\", benchmark = \"FTAW\") # \"FWRA.xls[x]\" assumed     # downloaded via download_fund_data()     spdr(\"SPYY\", benchmark = \"ACWI\")     spdr(\"SPYI\", benchmark = \"ACWI_IMI\")     ishs(\"IUSQ\", benchmark = \"ACWI\") }) series <- build_all_series() storage <- run_data_loaders() series <- join_env(storage, by = \"date\")"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"resetting-and-reloading","dir":"Articles","previous_headings":"","what":"Resetting and reloading","title":"Importing Data and Computing Differences in fundsr","text":"full reload (rerunning registered data loaders rebuilding master table) can accomplished via run_data_loaders() join_env() single call build_all_series() reload parameter set TRUE. Downloaded files can refreshed redownload parameter. package state can fully reset reset_state(). granular resetting functions also available.","code":"# rerun data loaders, discard variables in storage environment storage <- run_data_loaders(reload = TRUE) # reconstruct series table series <- join_env(storage, by = \"date\")  # equivalent, piped series <- run_data_loaders(reload = TRUE) |>     join_env(by = \"date\")  # equivalent, via build_all_series() helper series <- build_all_series(reload = TRUE) download_fund_data(redownload = TRUE) # reset everything (except fundsr.* options) reset_state() # reset the storage environment (optionally also the fund-index map) clear_storage() clear_storage(clear_map = TRUE)  # just the fund-index map clear_fund_index_map()  # deregister all data loaders clear_data_loaders()"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"calculating-differences","dir":"Articles","previous_headings":"","what":"Calculating differences","title":"Importing Data and Computing Differences in fundsr","text":"roll_diffs() calculates CAGR differences log-return differences master series table. returns named list elements cagr log (data frame). Using constructed master_series table Building master table, rolling net gross differences can calculated following calls. following code performs calculation, avoiding repetition silencing roll_diffs() via messages parameter. Differences can accessed via diffs$net$cagr, diffs$gross$log, etc. Inspect recent 365-day differences basis points (bps).","code":"n_days <- 365 # 365-day rolling window diffs_net <- roll_diffs(master_series,                         n_days,                         get_fund_index_map(),                         index_level = \"net\") #> Roll diffs gndb -> IDX2 #> Roll diffs IDX1-GR -> IDX1 #> Roll diffs IDX2-GR -> IDX2 #> Roll diffs fnda -> IDX1 #> Roll diffs fndb -> IDX1 #> Roll diffs gnda -> IDX2 diffs_gross <- roll_diffs(master_series,                           n_days,                           get_fund_index_map(),                           index_level = \"gross\") #> Roll diffs gndb -> IDX2-GR #> Skipping IDX1-GR: self-tracking #> Skipping IDX2-GR: self-tracking #> Roll diffs fnda -> IDX1-GR #> Roll diffs fndb -> IDX1-GR #> Roll diffs gnda -> IDX2-GR diffs <- purrr::map(     list(net = \"net\", gross = \"gross\"),     ~ roll_diffs(master_series,                  n_days,                  get_fund_index_map(),                  index_level = .x,                  messages = NULL) ) # show last 3 rows, multiplied by 10K (=> bps), # and rounded to 4 significant digits checkout <- function(x) {     x |>     slice_tail(n = 3) |>     mutate(across(-date, ~ signif(.x * 10000, digits = 4))) }  checkout(diffs_gross$cagr) #>         date   gndb IDX1-GR IDX2-GR   fnda   fndb   gnda #> 1 2025-12-28 -118.3      NA      NA -22.56 -5.122 -1.621 #> 2 2025-12-29 -118.5      NA      NA -25.65 -5.872 -3.119 #> 3 2025-12-30 -113.3      NA      NA -28.56 -1.171 -4.020 checkout(diffs_net$log) #>         date   gndb IDX1-GR IDX2-GR  fnda  fndb  gnda #> 1 2025-12-28 -59.21   49.16    48.4 28.84 44.55 46.93 #> 2 2025-12-29 -59.28   49.16    48.4 26.04 43.87 45.58 #> 3 2025-12-30 -56.58   49.16    48.4 23.08 48.09 44.70 checkout(diffs$net$log) # same #>         date   gndb IDX1-GR IDX2-GR  fnda  fndb  gnda #> 1 2025-12-28 -59.21   49.16    48.4 28.84 44.55 46.93 #> 2 2025-12-29 -59.28   49.16    48.4 26.04 43.87 45.58 #> 3 2025-12-30 -56.58   49.16    48.4 23.08 48.09 44.70"},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"setup-1","dir":"Articles","previous_headings":"Plotting","what":"Setup","title":"Importing Data and Computing Differences in fundsr","text":"","code":"funds <- c(\"fnda\", \"fndb\", \"gnda\", \"gndb\", \"IDX1-GR\", \"IDX2-GR\") gg <- scale_color_manual(     labels = toupper, # uppercase fund names for the legend     values = c(         \"IDX1-GR\" = \"black\",         \"IDX2-GR\" = \"grey60\",         \"fnda\" = \"#1bbe27\",         \"fndb\" = \"#e97f02\",         \"gnda\" = \"#b530b3\",         \"gndb\" = \"#37598a\"     ) )"},{"path":"https://stantraykov.github.io/fundsr/articles/importing-and-computing-differences.html","id":"output","dir":"Articles","previous_headings":"Plotting","what":"Output","title":"Importing Data and Computing Differences in fundsr","text":"See run_plots() examples scripts/examples way generate plots via flexible specifications.","code":"plot_roll_diffs(diffs_net$cagr,                 funds = funds,                 n_days = n_days,                 use_log = FALSE,                 bmark_type = \"net\",                 gg_params = gg) #> plot_roll_diffs: 365d rolling CAGR differences vs net benchmark plot_roll_diffs(diffs_net$log,                 funds = funds,                 n_days = n_days,                 use_log = TRUE,                 bmark_type = \"net\",                 gg_params = gg) #> plot_roll_diffs: 365d rolling log-return differences vs net benchmark plot_roll_diffs(diffs_gross$cagr,                 funds = funds,                 n_days = n_days,                 use_log = FALSE,                 bmark_type = \"gross\",                 gg_params = gg) #> plot_roll_diffs: 365d rolling CAGR differences vs gross benchmark plot_roll_diffs(diffs_gross$log,                 funds = funds,                 n_days = n_days,                 use_log = TRUE,                 bmark_type = \"gross\",                 gg_params = gg) #> plot_roll_diffs: 365d rolling log-return differences vs gross benchmark"},{"path":"https://stantraykov.github.io/fundsr/articles/simple-demo-using-real-data.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Simple Demo Using Real Data","text":"Set directories. Populate XLM directory monthly XLM reports. Import XLM files tibble. Set package options.","code":"library(dplyr) library(ggplot2) library(lubridate)  library(fundsr) dirs <- c(     data = file.path(\"data\", \"funds\"),     xlm = file.path(\"data\", \"xlm\"),     out = \"output\" ) for (d in dirs) {     dir.create(d, recursive = TRUE) } base_url <- \"https://www.cashmarket.deutsche-boerse.com/resource/blob/\" file_suffix <- \"-ETF-ETP-Statistic.xlsx\" blob_paths <- c(   \"4844258/91ce589f5309cbbd1ad0c92b3e6cdbda/data/20251130\",   \"4795286/394c4451af562507f9def3f39da62242/data/20251031\",   \"4725636/2d62a1677b537d996aefc45df3ff21d3/data/20250930\",   \"4674370/0de847380722e8e87bc821cb5313ba41/data/20250831\" ) xlm_urls <- paste0(base_url, blob_paths, file_suffix) for (url in xlm_urls) {     fname <- basename(url)     dest_path <- file.path(dirs[[\"xlm\"]], fname)     if (!file.exists(dest_path)) {         download.file(url, destfile = dest_path, mode = \"wb\", quiet = TRUE)         Sys.sleep(stats::runif(1, 0.5, 1.0))     } } if (!exists(\"xlm_data\")) {     xlm_data <- read_xlm_directory(dirs[[\"xlm\"]]) } fundsr_options(     data_dir = dirs[[\"data\"]],     out_dir = dirs[[\"out\"]],     # internal_png = TRUE, # output PNGs without Inkscape     # inkscape = \"path/to/inkscape\" # set only if auto-detection fails )  # Helper to add urls to option fundsr.fund_urls add_fund_urls(c(     IUSQ = \"https://www.ishares.com/uk/individual/en/products/251850/ishares-msci-acwi-ucits-etf/1535604580409.ajax?fileType=xls&fileName=iShares-MSCI-ACWI-UCITS-ETF-USD-Acc_fund&dataType=fund\",     SPYY = \"https://www.ssga.com/ie/en_gb/institutional/library-content/products/fund-data/etfs/emea/navhist-emea-en-spyy-gy.xlsx\" ))"},{"path":"https://stantraykov.github.io/fundsr/articles/simple-demo-using-real-data.html","id":"download-and-import","dir":"Articles","previous_headings":"","what":"Download and import","title":"Simple Demo Using Real Data","text":"Populate funds directory (download URLs listed option fundsr.fund_urls). Register data loader calling vendor-specific wrappers around load_fund(). Get fund index data master table. Check contents.","code":"download_fund_data() # downloads as SPYY.xlsx, IUSQ.xls #> Downloading 'IUSQ' #> Downloading 'SPYY' add_data_loader(function() {     # this loads the downloaded SPYY.xlsx     spdr(\"SPYY\", benchmark = \"ACWI\")     # loads IUSQ.xls, also retrieves ACWI (net) from the file     ishs(\"IUSQ\", benchmark = \"ACWI\", retrieve_benchmark = T) }) series <- build_all_series() %>%     filter(date >= as_date(\"2012-12-29\")) #> Reading Excel: 'data/funds/SPYY.xlsx' #> Reading Excel: 'data/funds/IUSQ.xls' series %>% filter(date >= as_date(\"2015-04-03\")) #> # A tibble: 2,764 × 4 #>    date        iusq  ACWI  spyy #>    <date>     <dbl> <dbl> <dbl> #>  1 2015-04-06  38.2  153.   NA  #>  2 2015-04-07  38.5  154.  101. #>  3 2015-04-08  38.6  154.  101. #>  4 2015-04-09  38.7  154.  101. #>  5 2015-04-10  38.9  155.  102. #>  6 2015-04-13  38.8  155.  102. #>  7 2015-04-14  38.9  155.  102. #>  8 2015-04-15  39.0  156.  102. #>  9 2015-04-16  39.1  156.  102. #> 10 2015-04-17  38.7  155.  101. #> # ℹ 2,754 more rows get_fund_index_map() #>   spyy   iusq  #> \"ACWI\" \"ACWI\""},{"path":"https://stantraykov.github.io/fundsr/articles/simple-demo-using-real-data.html","id":"compute","dir":"Articles","previous_headings":"","what":"Compute","title":"Simple Demo Using Real Data","text":"Calculate CAGR log-return differences 365-day rolling window.","code":"nd <- 365 diffs <- roll_diffs(series, nd, get_fund_index_map()) #> Roll diffs spyy -> ACWI #> Roll diffs iusq -> ACWI diffs$cagr %>% slice_tail(n = 3) #>         date        spyy         iusq #> 1 2026-01-07 0.004357993 0.0007516283 #> 2 2026-01-08 0.004395124 0.0007814405 #> 3 2026-01-09          NA           NA diffs$log %>% slice_tail(n = 3) #>         date        spyy         iusq #> 1 2026-01-07 0.003521613 0.0006082626 #> 2 2026-01-08 0.003554415 0.0006328890 #> 3 2026-01-09          NA           NA"},{"path":"https://stantraykov.github.io/fundsr/articles/simple-demo-using-real-data.html","id":"plot-specifications","dir":"Articles","previous_headings":"","what":"Plot specifications","title":"Simple Demo Using Real Data","text":"","code":"no_filter <- NULL zoom_filter <- function(x) {x %>% filter(date >= as_date(\"2022-01-01\"))} acwi_funds <- c(\"spyy\", \"iusq\") gg_par <- scale_color_manual(values = c(\"iusq\" = \"red\", \"spyy\" = \"blue\"),                              labels = toupper)  plot_spec <- tribble(     ~plot_id, ~title, ~data_filter,     ~gg_params, ~width,  ~height,     ~funds,      \"ACWI\", \"SPYY & IUSQ\", no_filter,     gg_par, 14, 9,     acwi_funds,      \"ACWIz\",     c(en = \"SPYY & IUSQ: recent years\",       bg = \"SPYY & IUSQ: последни години\"),     zoom_filter,     gg_par, 14, 9,     acwi_funds )"},{"path":"https://stantraykov.github.io/fundsr/articles/simple-demo-using-real-data.html","id":"plot","dir":"Articles","previous_headings":"","what":"Plot","title":"Simple Demo Using Real Data","text":"Run plots! outputs SVG files queues plots optional PNG export using Inkscape (see blow). may also output lower-quality PNGs (option fundsr.internal_png TRUE).","code":"p <- run_plots(diffs, nd, plot_spec, xlm_data) #> plot_roll_diffs: 365d rolling CAGR differences vs net benchmark: SPYY & IUSQ #> plot_xlms: spyy, iusq #> plot_roll_diffs: 365d rolling log-return differences vs net benchmark: SPYY & IUSQ #> plot_roll_diffs: 365d rolling CAGR differences vs net benchmark: SPYY & IUSQ: recent years #> plot_roll_diffs: 365d rolling log-return differences vs net benchmark: SPYY & IUSQ: recent years"},{"path":"https://stantraykov.github.io/fundsr/articles/simple-demo-using-real-data.html","id":"output","dir":"Articles","previous_headings":"","what":"Output","title":"Simple Demo Using Real Data","text":"Corresponding SVG files output directory.","code":"p[[\"ACWI\"]] p[[\"ACWI_L\"]] p[[\"ACWIz_L\"]] p[[\"xlm_ACWI\"]]"},{"path":"https://stantraykov.github.io/fundsr/articles/simple-demo-using-real-data.html","id":"plot-in-another-language","dir":"Articles","previous_headings":"","what":"Plot in another language","title":"Simple Demo Using Real Data","text":"","code":"Sys.setlocale(\"LC_MESSAGES\", \"bg_BG.UTF-8\") # needed on some systems #> [1] \"bg_BG.UTF-8\" Sys.setLanguage(\"bg\") plot_spec_bg <- plot_spec %>%     mutate(plot_id = paste0(plot_id, \"_bg\")) bg_p <- run_plots(diffs, nd, plot_spec_bg, xlm_data) #> plot_roll_diffs: 365-дневни плъзгащи се CAGR разлики спрямо нетен индекс: SPYY & IUSQ #> plot_xlms: spyy, iusq #> plot_roll_diffs: 365-дневни плъзгащи се разлики в log доходност спрямо нетен индекс: SPYY & IUSQ #> plot_roll_diffs: 365-дневни плъзгащи се CAGR разлики спрямо нетен индекс: SPYY & IUSQ: последни години #> plot_roll_diffs: 365-дневни плъзгащи се разлики в log доходност спрямо нетен индекс: SPYY & IUSQ: последни години bg_p[[\"ACWIz_bg_L\"]] bg_p[[\"xlm_ACWI_bg\"]]"},{"path":"https://stantraykov.github.io/fundsr/articles/simple-demo-using-real-data.html","id":"optional-high-quality-png-export","dir":"Articles","previous_headings":"","what":"Optional high-quality PNG export","title":"Simple Demo Using Real Data","text":"Process queued files via Inkscape (converting SVG PNG).","code":"export_pngs() #> Executing \"C:/Program Files/Inkscape/bin/inkscape.exe\" --actions=\"export-background:white;file-open:output/ACWI.svg;export-filename:output/ACWI.png;export-width:1300;export-do;file-close;file-open:output/xlm_ACWI.svg;export-filename:output/xlm_ACWI.png;export-width:1300;export-do;file-close;file-open:output/ACWI_L.svg;export-filename:output/ACWI_L.png;export-width:1300;export-do;file-close;file-open:output/ACWIz.svg;export-filename:output/ACWIz.png;export-width:1300;export-do;file-close;file-open:output/ACWIz_L.svg;export-filename:output/ACWIz_L.png;export-width:1300;export-do;file-close;file-open:output/ACWI_bg.svg;export-filename:output/ACWI_bg.png;export-width:1300;export-do;file-close;file-open:output/xlm_ACWI_bg.svg;export-filename:output/xlm_ACWI_bg.png;export-width:1300;export-do;file-close;file-open:output/ACWI_bg_L.svg;export-filename:output/ACWI_bg_L.png;export-width:1300;export-do;file-close;file-open:output/ACWIz_bg.svg;export-filename:output/ACWIz_bg.png;export-width:1300;export-do;file-close;file-open:output/ACWIz_bg_L.svg;export-filename:output/ACWIz_bg_L.png;export-width:1300;export-do;file-close\" #> [1] 0"},{"path":"https://stantraykov.github.io/fundsr/articles/survival-curves-for-financial-planning.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Survival Curves for Financial Planning","text":"","code":"library(fundsr) #> fundsr loaded.  fundsr_options(     out_dir = \"output\", # where to write plots     export_svg = TRUE, # whether to export SVG files     px_width = 1700, # for optional PNG output (internal or via Inkscape)     # internal_png = TRUE, # whether to export PNGs via ggplot2 (lower quality)      # Inkscape executable for higher-quality PNG export. Discovered auto-     # matically on most systems (Win/Mac/*ux). Set manually, if that fails:     # inkscape = \"/usr/bin/inkscape\"     # inkscape = \"C:/Program Files/Inkscape/bin/inkscape.exe\"     # inkscape = \"/Applications/Inkscape.app/Contents/MacOS/Inkscape\" )  data_dir <- file.path(\"data\", \"life\") dir.create(data_dir, recursive = TRUE, showWarnings = FALSE)"},{"path":"https://stantraykov.github.io/fundsr/articles/survival-curves-for-financial-planning.html","id":"get-the-data","dir":"Articles","previous_headings":"","what":"Get the data","title":"Survival Curves for Financial Planning","text":"Download HMD EUROSTAT, see wiki links info. Eurostat makes download available directly: HMD requires login licenses CC-, host (potentially outdated) data vignette. may download current data directly HMD actual use (’s free). HMD. Human Mortality Database. Max Planck Institute Demographic Research (Germany), University California, Berkeley (USA), French Institute Demographic Studies (France). Available www.mortality.org. See data repo README.md details. next steps assume following files data_dir (data/life) directory:","code":"dest_path <- file.path(data_dir, \"estat_proj_23naasmr.tsv.gz\") if (!file.exists(dest_path)) {     download.file(\"https://ec.europa.eu/eurostat/api/dissemination/sdmx/2.1/data/proj_23naasmr?format=TSV&compressed=true\", destfile = dest_path, mode = \"wb\") } hmd_urls <- c(     \"https://raw.githubusercontent.com/StanTraykov/fundsr-data/main/hmd/mltper_1x1.txt.gz\",     \"https://raw.githubusercontent.com/StanTraykov/fundsr-data/main/hmd/fltper_1x1.txt.gz\" )  for (url in hmd_urls) {     fname     <- basename(url)     dest_path <- file.path(data_dir, fname)     if (!file.exists(dest_path)) {         download.file(url, destfile = dest_path, mode = \"wb\")     } } [data/life] $ ls estat_proj_23naasmr.tsv.gz  fltper_1x1.txt.gz  mltper_1x1.txt.gz"},{"path":"https://stantraykov.github.io/fundsr/articles/survival-curves-for-financial-planning.html","id":"plot-survival-chances-per-hmd-life-tables","dir":"Articles","previous_headings":"","what":"Plot survival chances per HMD life tables","title":"Survival Curves for Financial Planning","text":"","code":"# Dutch male, age 42  lt_male <- read_life_table(data_dir, \"m\", look_back = 20)  # Use HMD population code (usually but not always ISO 3-letter) hmd_ca <- chance_alive(lt_male, \"NLD\", 42)   # Get a ggplot2 object; 2nd and 3rd argument passed just to label the plot hmd_p <- plot_chance_alive(hmd_ca, \"m\", \"Netherlands\")  # Save SVG file, queue PNG output (or write PNG directly, depending on config) save_plot(\"hmd_plot\", hmd_p, width = 11, height = 7, px_width = 1700)"},{"path":"https://stantraykov.github.io/fundsr/articles/survival-curves-for-financial-planning.html","id":"output","dir":"Articles","previous_headings":"Plot survival chances per HMD life tables","what":"Output","title":"Survival Curves for Financial Planning","text":"","code":"hmd_p"},{"path":"https://stantraykov.github.io/fundsr/articles/survival-curves-for-financial-planning.html","id":"plot-survival-chances-per-europop23-projections-baseline-and-lower-mortality-scenario","dir":"Articles","previous_headings":"","what":"Plot survival chances per EUROPOP23 projections (baseline and lower mortality scenario)","title":"Survival Curves for Financial Planning","text":"","code":"# Dutch male, age 42; use projected age x calendar year mortality starting from 2025  # Table contains both sexes es <- read_es_aasmr(data_dir) #> Warning: There were 2 warnings in `mutate()`. #> The first warning was: #> ℹ In argument: `Age = dplyr::case_when(...)`. #> Caused by warning: #> ! NAs introduced by coercion #> ℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.  # Use Eurostat 'geo' code (2-letter country code) es_ca <- chance_alive_es_aasmr(es, \"NL\", \"m\", 42, 2025)   # Get a ggplot2 object; 2nd and third argument passed just to label the plot es_p <- plot_chance_alive_es_aasmr(es_ca, \"m\", \"Netherlands\")  # Save SVG file, queue PNG output (or write PNG directly, depending on config) save_plot(\"es_plot\", es_p, width = 11, height = 7, px_width = 1700)"},{"path":"https://stantraykov.github.io/fundsr/articles/survival-curves-for-financial-planning.html","id":"output-1","dir":"Articles","previous_headings":"Plot survival chances per EUROPOP23 projections (baseline and lower mortality scenario)","what":"Output","title":"Survival Curves for Financial Planning","text":"","code":"es_p"},{"path":"https://stantraykov.github.io/fundsr/articles/survival-curves-for-financial-planning.html","id":"optional-export-pngs-via-inkscape","dir":"Articles","previous_headings":"","what":"Optional: export PNGs via Inkscape","title":"Survival Curves for Financial Planning","text":"","code":"export_pngs()"},{"path":"https://stantraykov.github.io/fundsr/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Stanislav Traykov. Author, maintainer.","code":""},{"path":"https://stantraykov.github.io/fundsr/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Traykov S (2026). fundsr: Rolling Differences (CAGR Log) Liquidity UCITS ETFs; Survival Financial Planning Plots. R package version 0.3.0, https://stantraykov.github.io/fundsr/.","code":"@Manual{,   title = {fundsr: Rolling Differences (CAGR and Log) and Liquidity for UCITS ETFs; Survival and Other Financial Planning Plots},   author = {Stanislav Traykov},   year = {2026},   note = {R package version 0.3.0},   url = {https://stantraykov.github.io/fundsr/}, }"},{"path":"https://stantraykov.github.io/fundsr/index.html","id":"fundsr-","dir":"","previous_headings":"","what":"Rolling Differences (CAGR and Log) and Liquidity for UCITS ETFs; Survival and Other Financial Planning Plots","title":"Rolling Differences (CAGR and Log) and Liquidity for UCITS ETFs; Survival and Other Financial Planning Plots","text":"fundsr imports fund NAVs index levels creates tracking difference plots (CAGR log-return). Plotting Xetra liquidity data (XLM) also supported.","code":""},{"path":"https://stantraykov.github.io/fundsr/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Rolling Differences (CAGR and Log) and Liquidity for UCITS ETFs; Survival and Other Financial Planning Plots","text":"","code":"# install.packages(\"pak\")  # Stable (latest release): pak::pak(\"StanTraykov/fundsr@*release\")  # Development: pak::pak(\"StanTraykov/fundsr\")"},{"path":"https://stantraykov.github.io/fundsr/index.html","id":"from-my-r-universe-binary-builds-of-latest-release","dir":"","previous_headings":"Installation","what":"From my r-universe (binary builds of latest release)","title":"Rolling Differences (CAGR and Log) and Liquidity for UCITS ETFs; Survival and Other Financial Planning Plots","text":"","code":"install.packages(   \"fundsr\",   repos = c(\"https://stantraykov.r-universe.dev\",  \"https://cloud.r-project.org\") )"},{"path":"https://stantraykov.github.io/fundsr/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Rolling Differences (CAGR and Log) and Liquidity for UCITS ETFs; Survival and Other Financial Planning Plots","text":"Importing Data Computing Differences Simple Demo Using Real Data Survival Curves Financial Planning glob_funds.R example workflow plotting global funds, data needs downloaded separately all_funds.R features many funds Reference","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/index.html","id":"disclaimer","dir":"","previous_headings":"","what":"Disclaimer","title":"Rolling Differences (CAGR and Log) and Liquidity for UCITS ETFs; Survival and Other Financial Planning Plots","text":"project provided informational analytical purposes (commentary performance comparison). Charts statistics shown derived measures (e.g., tracking differences/return differentials) intended reproduce redistribute underlying benchmark index datasets. third-party material, present, shown necessary identification discussion provided low-resolution raster images (high-resolution vector graphics) prevent reuse substitute source data. trademarks registered trademarks property respective owners. References products, indices, providers identification purposes imply endorsement affiliation. Use intended fall within applicable copyright exceptions/limitations (quotation criticism/review), extent permitted law.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/add_data_loader.html","id":null,"dir":"Reference","previous_headings":"","what":"Register a data loader — add_data_loader","title":"Register a data loader — add_data_loader","text":"Appends fun internal data-loader registry (.fundsr$data_loaders). Registered functions intended run sequentially registration order.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/add_data_loader.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Register a data loader — add_data_loader","text":"","code":"add_data_loader(fun)"},{"path":"https://stantraykov.github.io/fundsr/reference/add_data_loader.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Register a data loader — add_data_loader","text":"fun function register. Must take arguments.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/add_data_loader.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Register a data loader — add_data_loader","text":"Invisibly returns updated .fundsr$data_loaders list.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/add_data_loader.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Register a data loader — add_data_loader","text":"loader function body already registered, fun added .","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/add_data_loader.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Register a data loader — add_data_loader","text":"","code":"add_data_loader(function() NULL)"},{"path":"https://stantraykov.github.io/fundsr/reference/add_fund_index_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Add to fund-index map — add_fund_index_map","title":"Add to fund-index map — add_fund_index_map","text":"Merges fund-index pairs fund-index map (.fundsr$fund_index_map). Existing entries names replaced.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/add_fund_index_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add to fund-index map — add_fund_index_map","text":"","code":"add_fund_index_map(fund_index_map)"},{"path":"https://stantraykov.github.io/fundsr/reference/add_fund_index_map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add to fund-index map — add_fund_index_map","text":"fund_index_map Named vector list fund-index pairs merge .fundsr$fund_index_map. Names fund identifiers; values index identifiers.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/add_fund_index_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add to fund-index map — add_fund_index_map","text":"Invisibly returns NULL. Called side effects.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/add_fund_index_map.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add to fund-index map — add_fund_index_map","text":"","code":"add_fund_index_map(c(fund1 = \"INDEX1\", fund2 = \"INDEX2\", fund3 = \"INDEX2\"))"},{"path":"https://stantraykov.github.io/fundsr/reference/add_fund_urls.html","id":null,"dir":"Reference","previous_headings":"","what":"Add entries to the fund download list — add_fund_urls","title":"Add entries to the fund download list — add_fund_urls","text":"Adds one named download specifications fundsr.fund_urls option. Existing entries preserved; entries fund_urls replace existing entries name.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/add_fund_urls.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add entries to the fund download list — add_fund_urls","text":"","code":"add_fund_urls(fund_urls)"},{"path":"https://stantraykov.github.io/fundsr/reference/add_fund_urls.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add entries to the fund download list — add_fund_urls","text":"fund_urls named character vector mapping download identifiers URLs.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/add_fund_urls.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add entries to the fund download list — add_fund_urls","text":"list previous value fundsr.fund_urls.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/add_fund_urls.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add entries to the fund download list — add_fund_urls","text":"Names converted uppercase storing.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/amun.html","id":null,"dir":"Reference","previous_headings":"","what":"Import an Amundi fund — amun","title":"Import an Amundi fund — amun","text":"Wrapper around load_fund() Amundi files.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/amun.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import an Amundi fund — amun","text":"","code":"amun(ticker, file = NULL, benchmark = NULL)"},{"path":"https://stantraykov.github.io/fundsr/reference/amun.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import an Amundi fund — amun","text":"ticker Fund ticker. file Optional filename override. benchmark Optional benchmark key.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/build_all_series.html","id":null,"dir":"Reference","previous_headings":"","what":"Run all registered data loaders and join all loaded series into a big tibble. — build_all_series","title":"Run all registered data loaders and join all loaded series into a big tibble. — build_all_series","text":"Runs run_data_loaders(), joins resulting environment single data frame via join_env(), sorts result .","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/build_all_series.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run all registered data loaders and join all loaded series into a big tibble. — build_all_series","text":"","code":"build_all_series(reload = FALSE, by = \"date\", ...)"},{"path":"https://stantraykov.github.io/fundsr/reference/build_all_series.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run all registered data loaders and join all loaded series into a big tibble. — build_all_series","text":"reload Logical; TRUE, forces full reload temporarily setting options(fundsr.reload = TRUE). Column name join sort . ... Additional arguments forwarded join_env() (e.g. late, join_precedence, etc.).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/build_all_series.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run all registered data loaders and join all loaded series into a big tibble. — build_all_series","text":"tibble containing joined series, sorted .","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/build_all_series.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run all registered data loaders and join all loaded series into a big tibble. — build_all_series","text":"function convenience wrapper common workflow.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/build_all_series.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run all registered data loaders and join all loaded series into a big tibble. — build_all_series","text":"","code":"if (FALSE) { # \\dontrun{  s1 <- build_all_series() download_fund_data(redownload = TRUE) s2 <- build_all_series(by = \"date\", late = \"ftaw\", join_precedence = c(\".y\", \".x\")) %>%   filter(date >= as_date(\"2013-01-01\")) } # }"},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute conditional survival (chance alive) by age — chance_alive","title":"Compute conditional survival (chance alive) by age — chance_alive","text":"Computes conditional probability alive age x >= age0, given survival age0, HMD-style period life table. year, returned series : chance_alive(x | age0) = lx(x) / lx(age0).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute conditional survival (chance alive) by age — chance_alive","text":"","code":"chance_alive(lt, pop_name, age0)"},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute conditional survival (chance alive) by age — chance_alive","text":"lt life table tibble returned read_life_table(), containing least PopName, Year, Age, lx. pop_name Population code (HMD PopName) filter within lt (e.g. \"BGR\", \"USA\", \"DEUTNP\"). age0 Baseline age (integer). Returned ages start age0.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute conditional survival (chance alive) by age — chance_alive","text":"tibble columns Year, Age, chance_alive, sorted Year Age.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute conditional survival (chance alive) by age — chance_alive","text":"","code":"if (FALSE) { # \\dontrun{ lt_m <- read_life_table(file.path(\"data\", \"life\"), sex = \"m\", look_back = 10) ca <- chance_alive(lt_m, pop_name = \"BGR\", age0 = 27) ca } # }"},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive_es_aasmr.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute cohort-style survival from Eurostat EUROPOP2023 mortality assumptions — chance_alive_es_aasmr","title":"Compute cohort-style survival from Eurostat EUROPOP2023 mortality assumptions — chance_alive_es_aasmr","text":"Computes conditional survival (chance alive) person aged age0 start_year using Eurostat EUROPOP2023 age-specific mortality rate assumptions (dataset proj_23naasmr). computation follows cohort path (diagonal): age age0 + k uses mortality rate year start_year + k.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive_es_aasmr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute cohort-style survival from Eurostat EUROPOP2023 mortality assumptions — chance_alive_es_aasmr","text":"","code":"chance_alive_es_aasmr(es, geo, sex, age0, start_year = NULL)"},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive_es_aasmr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute cohort-style survival from Eurostat EUROPOP2023 mortality assumptions — chance_alive_es_aasmr","text":"es tibble returned read_es_aasmr(). geo Eurostat geo code (e.g. \"BG\", \"NL\"). sex Sex code: \"m\" \"f\" (case-insensitive). age0 Baseline age (integer). start_year Starting calendar year (integer). NULL, uses earliest year available selected geo/sex.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive_es_aasmr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute cohort-style survival from Eurostat EUROPOP2023 mortality assumptions — chance_alive_es_aasmr","text":"tibble columns geo, sex, projection, Year, Age, mx, qx, chance_alive.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive_es_aasmr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute cohort-style survival from Eurostat EUROPOP2023 mortality assumptions — chance_alive_es_aasmr","text":"result includes two projection variants: baseline (BSL) lower mortality (LMRT).","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/chance_alive_es_aasmr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute cohort-style survival from Eurostat EUROPOP2023 mortality assumptions — chance_alive_es_aasmr","text":"","code":"if (FALSE) { # \\dontrun{ es <- read_es_aasmr(file.path(\"data\", \"life\")) ca <- chance_alive_es_aasmr(es, geo = \"NL\", sex = \"m\", age0 = 42, start_year = 2022) p <- plot_chance_alive_es_aasmr(ca, sex = \"m\", population = \"NL\") p } # }"},{"path":"https://stantraykov.github.io/fundsr/reference/clear_data_loaders.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear registered data loaders — clear_data_loaders","title":"Clear registered data loaders — clear_data_loaders","text":"Clears internal data-loader registry (.fundsr$data_loaders), removing previously registered data loader functions.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/clear_data_loaders.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear registered data loaders — clear_data_loaders","text":"","code":"clear_data_loaders()"},{"path":"https://stantraykov.github.io/fundsr/reference/clear_data_loaders.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clear registered data loaders — clear_data_loaders","text":"Invisibly returns NULL. Called side effects.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/clear_data_loaders.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clear registered data loaders — clear_data_loaders","text":"","code":"clear_data_loaders()"},{"path":"https://stantraykov.github.io/fundsr/reference/clear_fund_index_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear fund-index map — clear_fund_index_map","title":"Clear fund-index map — clear_fund_index_map","text":"Clears fund-index map stored .fundsr$fund_index_map.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/clear_fund_index_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear fund-index map — clear_fund_index_map","text":"","code":"clear_fund_index_map()"},{"path":"https://stantraykov.github.io/fundsr/reference/clear_fund_index_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clear fund-index map — clear_fund_index_map","text":"Invisibly returns NULL. Called side effects.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/clear_fund_index_map.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clear fund-index map — clear_fund_index_map","text":"","code":"clear_fund_index_map()"},{"path":"https://stantraykov.github.io/fundsr/reference/clear_inkscape_queue.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear queued Inkscape exports — clear_inkscape_queue","title":"Clear queued Inkscape exports — clear_inkscape_queue","text":"Clears internal Inkscape export queue (.fundsr$inkscape_queue), removing queued export commands.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/clear_inkscape_queue.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear queued Inkscape exports — clear_inkscape_queue","text":"","code":"clear_inkscape_queue()"},{"path":"https://stantraykov.github.io/fundsr/reference/clear_inkscape_queue.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clear queued Inkscape exports — clear_inkscape_queue","text":"Invisibly returns NULL. Called side effects.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/clear_inkscape_queue.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clear queued Inkscape exports — clear_inkscape_queue","text":"","code":"clear_inkscape_queue()"},{"path":"https://stantraykov.github.io/fundsr/reference/clear_storage.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear storage — clear_storage","title":"Clear storage — clear_storage","text":"Removes objects package's storage environment (.fundsr_storage). Optionally also clears fund-index map (.fundsr$fund_index_map).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/clear_storage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear storage — clear_storage","text":"","code":"clear_storage(clear_map = FALSE)"},{"path":"https://stantraykov.github.io/fundsr/reference/clear_storage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clear storage — clear_storage","text":"clear_map Logical scalar; TRUE, also clears .fundsr$fund_index_map.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/clear_storage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clear storage — clear_storage","text":"Invisibly returns NULL. Called side effects.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/clear_storage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clear storage — clear_storage","text":"","code":"clear_storage() clear_storage(clear_map = TRUE)"},{"path":"https://stantraykov.github.io/fundsr/reference/coalesce_join_suffixes.html","id":null,"dir":"Reference","previous_headings":"","what":"Coalesce suffixed join columns into unsuffixed base columns — coalesce_join_suffixes","title":"Coalesce suffixed join columns into unsuffixed base columns — coalesce_join_suffixes","text":"Helper post-processing join results use suffixes .x / .y. base name appears suffixes (e.g. FTAW.x FTAW.y), function creates new column FTAW dplyr::coalesce(FTAW.x, FTAW.y) drops suffixed columns. order suffix controls column preferred.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/coalesce_join_suffixes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coalesce suffixed join columns into unsuffixed base columns — coalesce_join_suffixes","text":"","code":"coalesce_join_suffixes(df, suffixes = c(\".x\", \".y\"))"},{"path":"https://stantraykov.github.io/fundsr/reference/coalesce_join_suffixes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coalesce suffixed join columns into unsuffixed base columns — coalesce_join_suffixes","text":"df data frame tibble produced joins. suffixes Character vector length 2 giving suffixes coalesce, priority order. example, c(\".x\", \".y\") uses .x primary source falls back .y .x NA.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/coalesce_join_suffixes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coalesce suffixed join columns into unsuffixed base columns — coalesce_join_suffixes","text":"tibble rows df, pairs suffixed columns (e.g. name.x / name.y) replaced single unsuffixed column (e.g. name) containing coalesced values.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/download_fund_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Download fund data according to the configured download list — download_fund_data","title":"Download fund data according to the configured download list — download_fund_data","text":"Retrieves fund data files listed fundsr.fund_urls option saves directory specified fundsr.data_dir option.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/download_fund_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download fund data according to the configured download list — download_fund_data","text":"","code":"download_fund_data(redownload = FALSE)"},{"path":"https://stantraykov.github.io/fundsr/reference/download_fund_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download fund data according to the configured download list — download_fund_data","text":"redownload Logical; TRUE, existing files overwritten. FALSE, missing files downloaded.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/download_fund_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download fund data according to the configured download list — download_fund_data","text":"Invisibly returns NULL. Files written side effect.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/export_pngs.html","id":null,"dir":"Reference","previous_headings":"","what":"Export queued SVGs to PNG via Inkscape — export_pngs","title":"Export queued SVGs to PNG via Inkscape — export_pngs","text":"Runs pending Inkscape export actions stored internal queue, invoking Inkscape produce PNG files previously saved SVGs.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/export_pngs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export queued SVGs to PNG via Inkscape — export_pngs","text":"","code":"export_pngs(background = \"white\")"},{"path":"https://stantraykov.github.io/fundsr/reference/export_pngs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Export queued SVGs to PNG via Inkscape — export_pngs","text":"background Background color PNG export, passed Inkscape export-background:{...} action. NULL, background action added. Defaults \"white\".","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/export_pngs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Export queued SVGs to PNG via Inkscape — export_pngs","text":"exit status returned Inkscape (0 indicates success). Invisibly returns NULL queue empty Inkscape located.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/export_pngs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Export queued SVGs to PNG via Inkscape — export_pngs","text":"function reads queued Inkscape actions .fundsr$inkscape_queue, optionally prepends export-background:{background} action, executes Inkscape using base::system2(). Inkscape executable searched following order: user-supplied config (fundsr.inkscape option INKSCAPE environment variable) inkscape executable available system PATH common installation locations (Windows, macOS, Linux, etc.) success, internal queue cleared. failure, queue left intact message printed.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/fundsr_get_option.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a fundsr option — fundsr_get_option","title":"Get a fundsr option — fundsr_get_option","text":"Reads getOption(\"fundsr.<name>\"). unset, uses default provided; otherwise falls back package default .fundsr_option_defaults(). Errors unknown option names.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/fundsr_get_option.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a fundsr option — fundsr_get_option","text":"","code":"fundsr_get_option(name, default)"},{"path":"https://stantraykov.github.io/fundsr/reference/fundsr_get_option.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a fundsr option — fundsr_get_option","text":"name single option name without \"fundsr.\" prefix (e.g. \"reload\"). default Optional fallback value used option unset. supplied, package default used.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/fundsr_get_option.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a fundsr option — fundsr_get_option","text":"option value (fallback/default).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/fundsr_options.html","id":null,"dir":"Reference","previous_headings":"","what":"Set fundsr package options — fundsr_options","title":"Set fundsr package options — fundsr_options","text":"Convenience wrapper around options() setting common fundsr.* options.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/fundsr_options.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set fundsr package options — fundsr_options","text":"","code":"fundsr_options(   data_dir = NULL,   out_dir = NULL,   px_width = NULL,   internal_png = NULL,   export_svg = NULL,   xetra_map = NULL,   inkscape = NULL,   reload = NULL,   fund_urls = NULL,   verbosity = NULL )"},{"path":"https://stantraykov.github.io/fundsr/reference/fundsr_options.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set fundsr package options — fundsr_options","text":"data_dir Directory containing fund data files (sets fundsr.data_dir). out_dir Output directory plots/exports (sets fundsr.out_dir). px_width Default PNG export width pixels (sets fundsr.px_width). internal_png Logical; whether save internal PNG immediately exporting plots (sets fundsr.internal_png). export_svg Logical; whether save SVGs queue Inkscape exports (sets fundsr.export_svg). xetra_map Named character vector mapping \"primary\" tickers (series table column names) Xetra tickers (sets fundsr.xetra_map). inkscape Inkscape executable (path command name) used export helpers (sets fundsr.inkscape). reload Logical; default value forcing re-import cached objects (sets fundsr.reload). fund_urls Named character vector named list URLs fund data downloads (sets fundsr.fund_urls). verbosity Integer verbosity level (sets fundsr.verbosity). Use 0 silence informational messages, 2 enable additional messages.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/fundsr_options.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set fundsr package options — fundsr_options","text":"Invisibly returns named list previous values options changed (returned options()).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/fundsr_options.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set fundsr package options — fundsr_options","text":"arguments default NULL. argument left NULL, corresponding fundsr.* option left unchanged.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/get_fund_index_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the internal fund index map — get_fund_index_map","title":"Get the internal fund index map — get_fund_index_map","text":"Returns package's fund index lookup table stored .fundsr$fund_index_map.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/get_fund_index_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the internal fund index map — get_fund_index_map","text":"","code":"get_fund_index_map()"},{"path":"https://stantraykov.github.io/fundsr/reference/get_fund_index_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the internal fund index map — get_fund_index_map","text":"character vector named list representing internal fund index mapping.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/get_storage.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the internal fund storage — get_storage","title":"Get the internal fund storage — get_storage","text":"Returns fundsr's fund storage environment (.fundsr_storage).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/get_storage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the internal fund storage — get_storage","text":"","code":"get_storage()"},{"path":"https://stantraykov.github.io/fundsr/reference/get_storage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the internal fund storage — get_storage","text":"storage environment.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/hsbc.html","id":null,"dir":"Reference","previous_headings":"","what":"Import an HSBC fund — hsbc","title":"Import an HSBC fund — hsbc","text":"Wrapper around load_fund() HSBC files.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/hsbc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import an HSBC fund — hsbc","text":"","code":"hsbc(ticker, file = NULL, benchmark = NULL)"},{"path":"https://stantraykov.github.io/fundsr/reference/hsbc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import an HSBC fund — hsbc","text":"ticker Fund ticker. file Optional filename override. benchmark Optional benchmark key.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/inve.html","id":null,"dir":"Reference","previous_headings":"","what":"Import an Invesco fund — inve","title":"Import an Invesco fund — inve","text":"Wrapper around load_fund() Invesco files.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/inve.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import an Invesco fund — inve","text":"","code":"inve(ticker, file = NULL, benchmark = NULL, retrieve_benchmark = FALSE)"},{"path":"https://stantraykov.github.io/fundsr/reference/inve.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import an Invesco fund — inve","text":"ticker Fund ticker. file Optional filename override. benchmark Optional benchmark key. retrieve_benchmark Logical; also import benchmark column.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/ishs.html","id":null,"dir":"Reference","previous_headings":"","what":"Import an iShares fund — ishs","title":"Import an iShares fund — ishs","text":"Wrapper around load_fund() iShares files.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/ishs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import an iShares fund — ishs","text":"","code":"ishs(ticker, file = NULL, benchmark = NULL, retrieve_benchmark = FALSE)"},{"path":"https://stantraykov.github.io/fundsr/reference/ishs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import an iShares fund — ishs","text":"ticker Fund ticker. file Optional filename override. benchmark Optional benchmark key. retrieve_benchmark Logical; also import benchmark column.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/join_env.html","id":null,"dir":"Reference","previous_headings":"","what":"Join all data frames in an environment with optional late joins — join_env","title":"Join all data frames in an environment with optional late joins — join_env","text":"Performs dplyr::full_join() across objects env (alphabetical order), excluding listed late. Late objects joined sequentially (via dplyr::left_join() default) order given. Full-join clashes use suffixes c(\".x\", \".y\"); late joins use c(\".early\", \".late\").","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/join_env.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Join all data frames in an environment with optional late joins — join_env","text":"","code":"join_env(   env,   by = \"date\",   late = NULL,   join_precedence = NULL,   coalesce_suffixed = NULL,   late_join = dplyr::left_join )"},{"path":"https://stantraykov.github.io/fundsr/reference/join_env.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Join all data frames in an environment with optional late joins — join_env","text":"env Environment containing data frames (incl. tibbles) join. Character vector join keys (passed dplyr::full_join()). late Character vector object names env excluded initial full join instead left-joined afterwards. Defaults NULL. join_precedence Optional character vector length 2 giving join suffixes coalesce (example, c(\".early\", \".late\") c(\".late\", \".early\")). non-NULL, pairs columns whose names end suffixes (share base name) replaced single unsuffixed column containing coalesced values, preferring left suffix values available. NULL (default), automatic coalescing performed. coalesce_suffixed Deprecated; use join_precedence (meaning). late_join Function use joining late objects, e.g. dplyr::left_join (default). Must accept dplyr-style suffix arguments.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/join_env.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Join all data frames in an environment with optional late joins — join_env","text":"tibble: full join non-late objects, followed sequential left-joins (joins specified late_join) late objects. join_precedence supplied, suffixed join columns coalesced unsuffixed base columns described .","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/join_env.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Join all data frames in an environment with optional late joins — join_env","text":"Optionally, column pairs specified suffixes can coalesced unsuffixed base columns via join_precedence.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/join_env.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Join all data frames in an environment with optional late joins — join_env","text":"","code":"e <- new.env()   e$members <- dplyr::band_members   e$instruments <- dplyr::band_instruments   e$other_instr <- dplyr::band_instruments |>       dplyr::mutate(plays = dplyr::case_match(name,                                               \"John\" ~ \"banjo\",                                               \"Paul\" ~ \"mellotron\",                                               \"Keith\" ~ \"harpsichord\")) |>       dplyr::add_row(name = \"Mick\", plays = \"harmonica\") |>       dplyr::add_row(name = \"Stu\", plays = \"piano\")    full <- join_env(e, by = \"name\")   late <- join_env(e, by = \"name\", late = \"other_instr\")   late_coalesced <- join_env(e,                              by = \"name\",                              late = \"other_instr\",                              join_precedence = c(\".early\", \".late\"))   print(list(full = full, late = late, late_coalesced = late_coalesced)) #> $full #> # A tibble: 5 × 4 #>   name  plays.x band    plays.y     #>   <chr> <chr>   <chr>   <chr>       #> 1 John  guitar  Beatles banjo       #> 2 Paul  bass    Beatles mellotron   #> 3 Keith guitar  NA      harpsichord #> 4 Mick  NA      Stones  harmonica   #> 5 Stu   NA      NA      piano       #>  #> $late #> # A tibble: 4 × 4 #>   name  plays.early band    plays.late  #>   <chr> <chr>       <chr>   <chr>       #> 1 John  guitar      Beatles banjo       #> 2 Paul  bass        Beatles mellotron   #> 3 Keith guitar      NA      harpsichord #> 4 Mick  NA          Stones  harmonica   #>  #> $late_coalesced #> # A tibble: 4 × 3 #>   name  band    plays     #>   <chr> <chr>   <chr>     #> 1 John  Beatles guitar    #> 2 Paul  Beatles bass      #> 3 Keith NA      guitar    #> 4 Mick  Stones  harmonica #>"},{"path":"https://stantraykov.github.io/fundsr/reference/load_fund.html","id":null,"dir":"Reference","previous_headings":"","what":"Load a fund's NAV data and optionally register its benchmark mapping — load_fund","title":"Load a fund's NAV data and optionally register its benchmark mapping — load_fund","text":"Imports fund's NAV time series Excel file stores storage environment via store_timeseries(). Optionally, benchmark column can also imported, fund/index mapping recorded .fundsr$fund_index_map.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/load_fund.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load a fund's NAV data and optionally register its benchmark mapping — load_fund","text":"","code":"load_fund(   ticker,   file = NULL,   sheet = 1,   date_col = \"^Date\",   nav_col = \"^NAV\",   benchmark = NULL,   benchmark_col = NULL,   retrieve_benchmark = FALSE,   date_order = \"dmy\",   var_name = NULL,   data_sheet = NULL )"},{"path":"https://stantraykov.github.io/fundsr/reference/load_fund.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load a fund's NAV data and optionally register its benchmark mapping — load_fund","text":"ticker Fund ticker symbol. Used (lower case) storage key (upper case) derive default filename. file Optional filename. NULL (default), inferred ticker described . sheet Sheet index name containing NAV data. date_col Regular expression identifying date column. nav_col Regular expression identifying fund's NAV column. benchmark Optional benchmark key fund associated fund/index map. retrieve_benchmark = TRUE, value also used name benchmark series imported. benchmark_col Regular expression identifying benchmark column Excel sheet. used retrieve_benchmark = TRUE. retrieve_benchmark Logical; TRUE, benchmark benchmark_col must supplied benchmark column imported alongside fund. date_order Date parsing order passed importer. var_name Specify custom variable name storage environment. data_sheet Deprecated; use sheet.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/load_fund.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load a fund's NAV data and optionally register its benchmark mapping — load_fund","text":"Invisibly returns NULL. imported data stored .fundsr_storage tolower(ticker). fund/index mapping recorded .fundsr$fund_index_map benchmark supplied.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/load_fund.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Load a fund's NAV data and optionally register its benchmark mapping — load_fund","text":"file NULL, function searches fundsr.data_dir exactly one paste0(toupper(ticker), \".xlsx\") paste0(toupper(ticker), \".xls\"). function builds column-translation mapping fund NAV column , requested, benchmark column. calls read_timeseries_excel() read Excel file store_timeseries() cache imported object tolower(ticker). benchmark provided, corresponding entry added .fundsr$fund_index_map link fund benchmark key.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/make_date_fmts.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate candidate date format strings for as.Date() — make_date_fmts","title":"Generate candidate date format strings for as.Date() — make_date_fmts","text":"Builds set possible format strings suitable .Date() given day/month/year order. intended fast \"detect per sheet, parse \" workflows.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/make_date_fmts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate candidate date format strings for as.Date() — make_date_fmts","text":"","code":"make_date_fmts(order)"},{"path":"https://stantraykov.github.io/fundsr/reference/make_date_fmts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate candidate date format strings for as.Date() — make_date_fmts","text":"order single string specifying component order permutation \"d\", \"y\", exactly one \"m\" \"M\" (e.g. \"dmy\", \"ymd\", \"dMy\", \"Mdy\").","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/make_date_fmts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate candidate date format strings for as.Date() — make_date_fmts","text":"character vector unique date format strings.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/make_date_fmts.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate candidate date format strings for as.Date() — make_date_fmts","text":"returned formats cover common separators (\"/\", \"-\", \".\", \" \"), unseparated dates numeric months, optional comma final 4- 2-digit year element (%y, %Y) space-separated dates. Month handling depends order: order uses \"m\", month tokens include numeric months (%m) abbreviated month names (%b). order uses \"M\", month tokens include full month names (%B). Month name formats (%b, %B) locale-dependent.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/msci.html","id":null,"dir":"Reference","previous_headings":"","what":"Import an MSCI index sheet and register benchmark mappings — msci","title":"Import an MSCI index sheet and register benchmark mappings — msci","text":"Wrapper around store_timeseries() read_timeseries_excel() MSCI index files.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/msci.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import an MSCI index sheet and register benchmark mappings — msci","text":"","code":"msci(var_name, col_trans, benchmarks = NULL, file)"},{"path":"https://stantraykov.github.io/fundsr/reference/msci.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import an MSCI index sheet and register benchmark mappings — msci","text":"var_name Storage key used .fundsr_storage. col_trans Named vector specifying column translations. benchmarks Optional index mapping record fund index map (used map gross net indices). file Filename XLSX file import.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/msci.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Import an MSCI index sheet and register benchmark mappings — msci","text":"Invisibly returns NULL. Data stored via store_timeseries().","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/plot_chance_alive.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot chance alive by age — plot_chance_alive","title":"Plot chance alive by age — plot_chance_alive","text":"Plots conditional survival curves produced chance_alive(). recent year highlighted black; earlier years shown teal--orange--light gradient. Horizontal reference lines mark 10% 5% survival levels.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/plot_chance_alive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot chance alive by age — plot_chance_alive","text":"","code":"plot_chance_alive(ca, sex = c(\"m\", \"f\"), population)"},{"path":"https://stantraykov.github.io/fundsr/reference/plot_chance_alive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot chance alive by age — plot_chance_alive","text":"ca tibble returned chance_alive(), columns Year, Age, chance_alive. sex Sex code: \"m\" (male) \"f\" (female). Used labeling. population Population label/code display subtitle (e.g. \"BGR\", \"USA\", \"DEUTNP\").","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/plot_chance_alive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot chance alive by age — plot_chance_alive","text":"ggplot object.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/plot_chance_alive.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot chance alive by age — plot_chance_alive","text":"","code":"if (FALSE) { # \\dontrun{ lt_m <- read_life_table(file.path(\"data\", \"life\"), sex = \"m\", look_back = 10) ca <- chance_alive(lt_m, pop_name = \"BGR\", age0 = 27) p <- plot_chance_alive(ca, sex = \"m\", population = \"BGR\") p } # }"},{"path":"https://stantraykov.github.io/fundsr/reference/plot_chance_alive_es_aasmr.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot cohort-style survival from Eurostat EUROPOP2023 assumptions — plot_chance_alive_es_aasmr","title":"Plot cohort-style survival from Eurostat EUROPOP2023 assumptions — plot_chance_alive_es_aasmr","text":"Plots conditional survival curves returned chance_alive_es_aasmr(). baseline projection (BSL) shown black lower-mortality variant (LMRT) shown dark cyan.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/plot_chance_alive_es_aasmr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot cohort-style survival from Eurostat EUROPOP2023 assumptions — plot_chance_alive_es_aasmr","text":"","code":"plot_chance_alive_es_aasmr(ca, sex = c(\"m\", \"f\"), population)"},{"path":"https://stantraykov.github.io/fundsr/reference/plot_chance_alive_es_aasmr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot cohort-style survival from Eurostat EUROPOP2023 assumptions — plot_chance_alive_es_aasmr","text":"ca tibble returned chance_alive_es_aasmr(), columns projection, Age, chance_alive (typically geo, sex, Year). sex Sex code: \"m\" \"f\" (case-insensitive). Used labeling. population Population label/code display subtitle (e.g. \"BG\").","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/plot_chance_alive_es_aasmr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot cohort-style survival from Eurostat EUROPOP2023 assumptions — plot_chance_alive_es_aasmr","text":"ggplot object.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/plot_chance_alive_es_aasmr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot cohort-style survival from Eurostat EUROPOP2023 assumptions — plot_chance_alive_es_aasmr","text":"","code":"if (FALSE) { # \\dontrun{ es_aasmr <- read_es_aasmr(file.path(\"data\", \"life\")) ca <- chance_alive_es_aasmr(es_aasmr, geo = \"BG\", sex = \"m\", age0 = 42, start_year = 2022) p <- plot_chance_alive_es_aasmr(ca, sex = \"m\", population = \"BG\") p } # }"},{"path":"https://stantraykov.github.io/fundsr/reference/plot_roll_diffs.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot rolling return differences against benchmark — plot_roll_diffs","title":"Plot rolling return differences against benchmark — plot_roll_diffs","text":"Plots rolling annualized tracking differences (CAGR-style log-return) selected funds benchmark series. plot uses quantile-based y-limits formats y-axis basis points.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/plot_roll_diffs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot rolling return differences against benchmark — plot_roll_diffs","text":"","code":"plot_roll_diffs(   data,   n_days,   funds,   use_log = FALSE,   gg_params = NULL,   title_add = NULL,   date_brk = NULL,   qprob = c(0.005, 0.995),   bmark_type = c(\"net\", \"gross\") )"},{"path":"https://stantraykov.github.io/fundsr/reference/plot_roll_diffs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot rolling return differences against benchmark — plot_roll_diffs","text":"data Input data frame containing date column one rolling-difference column per fund (specified funds). n_days Window length (days) used compute rolling differences (used labelling). funds Character vector fund column names include. use_log Logical; TRUE, labels plot log-return differences. FALSE, labels plot CAGR differences. gg_params Optional ggplot components add plot. title_add Optional title suffix. Can single string named character vector specifying title multiple languages (e.g. c(en=..., bg=...)). date_brk Optional date-break specification x-axis (e.g. \"3 months\"). NULL, chosen automatically based time span available data. qprob Two-element numeric vector giving lower upper quantiles used set baseline y-axis limits. Defaults c(0.005, 0.995). bmark_type Benchmark type used title: \"net\" \"gross\".","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/plot_roll_diffs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot rolling return differences against benchmark — plot_roll_diffs","text":"ggplot object.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/plot_roll_diffs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot rolling return differences against benchmark — plot_roll_diffs","text":"function reshapes data long format produces scatter plot coloured fund. y-axis limits primarily determined quantiles rolling differences (specified qprob), always including 0. avoid clipping recent extremes, y-limits expanded (needed) also include full range observed recent 30 days data, even values fall outside qprob quantiles. x-axis breaks chosen follows date_brk NULL: spans 3 years, breaks default \"3 months\". longer spans, breaks anchored calendar months (semiannual quarterly depending span) included data range extends beyond midpoint neighboring break.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/plot_xlms.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Xetra Liquidity Measure (XLM) time series — plot_xlms","title":"Plot Xetra Liquidity Measure (XLM) time series — plot_xlms","text":"Generates time-series plot XLM values one ETFs, optional back-translation displayed ticker labels via fundsr.xetra_map option.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/plot_xlms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Xetra Liquidity Measure (XLM) time series — plot_xlms","text":"","code":"plot_xlms(xlm_data, tickers, rgx = FALSE, gg_params = NULL, back_trans = FALSE)"},{"path":"https://stantraykov.github.io/fundsr/reference/plot_xlms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Xetra Liquidity Measure (XLM) time series — plot_xlms","text":"xlm_data data frame containing XLM observations, including columns date, xlm, ticker, name. tickers Character vector tickers plot, pattern rgx = TRUE. rgx Logical; TRUE, tickers treated regular expression matched name column; otherwise matched ticker column. gg_params Optional list additional ggplot components (themes, scales, labels) added base plot. back_trans Logical; TRUE, replaces values ticker column filtering using inverse mapping stored fundsr.xetra_map option. affects displayed (legend labels color grouping), rows selected.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/plot_xlms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Xetra Liquidity Measure (XLM) time series — plot_xlms","text":"ggplot object showing XLM time-series curves.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/plot_xlms.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot Xetra Liquidity Measure (XLM) time series — plot_xlms","text":"rgx = FALSE, data filtered matching tickers ticker column. rgx = TRUE, tickers treated regular expression matched name column. back_trans = TRUE, function reads option fundsr.xetra_map, expected named character vector mapping internal identifiers Xetra tickers, example: c(fwra = \"fwia\", acwi = \"lyy0\"). mapping inverted applied already-filtered data occurrences Xetra tickers plotted data replaced internal identifiers plot's legend grouping.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/plot_xlms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Xetra Liquidity Measure (XLM) time series — plot_xlms","text":"","code":"if (FALSE) { # \\dontrun{ options(fundsr.xetra_map = c(fwra = \"fwia\", acwi = \"lyy0\", iwda = \"eunl\", cw8 = \"amew\"))  # Filter by tickers as they appear in xlm_data$ticker, but display back-translated labels plot_xlms(xlm_data, tickers = c(\"fwia\", \"eunl\"), back_trans = TRUE)  # Regex match against the `name` column # (back-translation, if enabled, still happens after filtering) plot_xlms(xlm_data, tickers = \"MSCI World\", rgx = TRUE, back_trans = TRUE) } # }"},{"path":"https://stantraykov.github.io/fundsr/reference/read_es_aasmr.html","id":null,"dir":"Reference","previous_headings":"","what":"Read Eurostat EUROPOP2023 mortality-assumption table (proj_23naasmr) — read_es_aasmr","title":"Read Eurostat EUROPOP2023 mortality-assumption table (proj_23naasmr) — read_es_aasmr","text":"Reads Eurostat TSV export EUROPOP2023 age-specific mortality rate assumptions (dataset proj_23naasmr), typically downloaded estat_proj_23naasmr.tsv.gz. Returns tidy long table metadata columns plus numeric Age, Year, mx.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_es_aasmr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read Eurostat EUROPOP2023 mortality-assumption table (proj_23naasmr) — read_es_aasmr","text":"","code":"read_es_aasmr(directory)"},{"path":"https://stantraykov.github.io/fundsr/reference/read_es_aasmr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read Eurostat EUROPOP2023 mortality-assumption table (proj_23naasmr) — read_es_aasmr","text":"directory Directory containing estat_proj_23naasmr.tsv.gz.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_es_aasmr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read Eurostat EUROPOP2023 mortality-assumption table (proj_23naasmr) — read_es_aasmr","text":"tibble columns: freq, projection, sex, unit, geo, age, Age, Year, mx.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_es_aasmr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Read Eurostat EUROPOP2023 mortality-assumption table (proj_23naasmr) — read_es_aasmr","text":"Eurostat value flags (e.g. provisional/estimated markers) tolerated: numeric part parsed mx, missing values encoded : returned NA. Eurostat age dimension uses codes like Y_LT1 (age < 1), Y1 (age 1), Y_GE85 (age 85+). function maps Y_LT1 Age = 0 parses Y{n} Y_GE{n} integer ages.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/read_es_aasmr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read Eurostat EUROPOP2023 mortality-assumption table (proj_23naasmr) — read_es_aasmr","text":"","code":"if (FALSE) { # \\dontrun{ es_aasmr <- read_es_aasmr(file.path(\"data\", \"life\")) es_aasmr %>% dplyr::count(geo, sex, projection, sort = TRUE) } # }"},{"path":"https://stantraykov.github.io/fundsr/reference/read_life_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Read HMD period life tables (1x1) from disk — read_life_table","title":"Read HMD period life tables (1x1) from disk — read_life_table","text":"Reads Human Mortality Database (HMD) period life table file (1x1, single year age) selected sex returns last look_back years based latest year present file. open-ended age group (e.g. \"110+\") parsed numeric lower bound (e.g. 110).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_life_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read HMD period life tables (1x1) from disk — read_life_table","text":"","code":"read_life_table(directory, sex = c(\"f\", \"m\"), look_back = 20)"},{"path":"https://stantraykov.github.io/fundsr/reference/read_life_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read HMD period life tables (1x1) from disk — read_life_table","text":"directory Directory containing HMD life table files (\"mltper_1x1.txt\" / \"fltper_1x1.txt\" gzipped variants \"mltper_1x1.txt.gz\" / \"fltper_1x1.txt.gz\"). sex Sex code: \"m\" (male) \"f\" (female). look_back Number recent years keep (inclusive latest available year). Must >= 1.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_life_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read HMD period life tables (1x1) from disk — read_life_table","text":"tibble columns: PopName, Year, Age, mx, qx, ax, lx, dx, Lx, Tx, ex. Age returned integer.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/read_life_table.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read HMD period life tables (1x1) from disk — read_life_table","text":"","code":"if (FALSE) { # \\dontrun{ lt_m <- read_life_table(file.path(\"data\", \"life\"), sex = \"m\", look_back = 20) lt_m %>% dplyr::distinct(PopName) %>% dplyr::arrange(PopName) } # }"},{"path":"https://stantraykov.github.io/fundsr/reference/read_msci_tsv.html","id":null,"dir":"Reference","previous_headings":"","what":"Read an MSCI two-column TSV file — read_msci_tsv","title":"Read an MSCI two-column TSV file — read_msci_tsv","text":"Extracts data portion MSCI TSV file—skipping header noise—reads two-column table containing date numeric value.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_msci_tsv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read an MSCI two-column TSV file — read_msci_tsv","text":"","code":"read_msci_tsv(file)"},{"path":"https://stantraykov.github.io/fundsr/reference/read_msci_tsv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read an MSCI two-column TSV file — read_msci_tsv","text":"file Filename TSV read (relative fundsr.data_dir option).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_msci_tsv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read an MSCI two-column TSV file — read_msci_tsv","text":"tibble Date column one numeric column.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_msci_tsv.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Read an MSCI two-column TSV file — read_msci_tsv","text":"function filters lines beginning digit (date rows) literal \"Date\", parses using fixed %m/%d/%Y date format numeric second field.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries.html","id":null,"dir":"Reference","previous_headings":"","what":"Read a time series file (CSV/TSV) with a date + one or more value columns — read_timeseries","title":"Read a time series file (CSV/TSV) with a date + one or more value columns — read_timeseries","text":"Loads delimited file directory specified fundsr.data_dir, parses date column proper Date, coerces columns numeric.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read a time series file (CSV/TSV) with a date + one or more value columns — read_timeseries","text":"","code":"read_timeseries(   file,   date_col = \"date\",   time_unit = c(\"ms\", \"s\", \"us\", \"ns\"),   orders = NULL,   force_text_date = FALSE )"},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read a time series file (CSV/TSV) with a date + one or more value columns — read_timeseries","text":"file Filename read (relative fundsr.data_dir option). date_col Name date column file. time_unit Character scalar giving unit numeric date column (Unix epoch). One \"ms\" (default), \"s\", \"us\", \"ns\". orders Character vector lubridate parsing orders text date column (passed lubridate::parse_date_time()). NULL, default set common dmy-order formats used. force_text_date Logical scalar. TRUE, date column always parsed text using orders (Unix-epoch numeric interpretation attempted).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read a time series file (CSV/TSV) with a date + one or more value columns — read_timeseries","text":"tibble parsed date column numeric value columns.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Read a time series file (CSV/TSV) with a date + one or more value columns — read_timeseries","text":"reader chosen file extension: .csv uses readr::read_csv() .tsv/.tab/.txt uses readr::read_tsv(). Gzipped variants .csv.gz .tsv.gz also supported. function assumes date column exists (default: date). default, date column looks numeric (.e., coercion numeric yields least one non-NA), interpreted Unix timestamp (scaled time_unit). Otherwise parsed text using orders. force_text_date = TRUE, always parsed text using orders. non-date columns coerced .numeric() (non-parsable values become NA).","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries_excel.html","id":null,"dir":"Reference","previous_headings":"","what":"Read a time series from an Excel workbook — read_timeseries_excel","title":"Read a time series from an Excel workbook — read_timeseries_excel","text":"Reads Excel sheet, detects header row searching date header, parses date column, selects/renames value columns regex, optionally coerces value columns numeric.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries_excel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read a time series from an Excel workbook — read_timeseries_excel","text":"","code":"read_timeseries_excel(   file,   sheet,   date_col,   col_trans,   date_order = \"dmy\",   force_numeric = TRUE,   comma_rep = \".\" )"},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries_excel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read a time series from an Excel workbook — read_timeseries_excel","text":"file Path Excel workbook, relative fundsr.data_dir. sheet Sheet identifier read (sheet name 1-based index). date_col String used detect header row identify date column (matched via regex cell contents header-row detection, column names headers assigned). col_trans Named character vector (list) mapping output column names regex patterns used select columns sheet. Names returned column names; values patterns matched header names. date_order Character scalar indicating day/month/year order used generate candidate date formats parsing text dates (passed make_date_fmts()). Default \"dmy\". force_numeric Logical. TRUE (default), always replace matched value columns numeric coercions (non-parsable values become NA). FALSE, replace coercion succeeds non-NA values. comma_rep Character scalar used converting character numerics: commas replaced string conversion. Default \".\" (treat comma decimal separator).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries_excel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read a time series from an Excel workbook — read_timeseries_excel","text":"tibble date column (class Date) selected value columns (possibly numeric), names determined col_trans.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries_excel.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Read a time series from an Excel workbook — read_timeseries_excel","text":"sheet read using read_excel_or_xml() (tries readxl first, XML fallback). Completely empty columns dropped. first row containing date_col (cell match) treated header row; data starts . Date parsing: detected date column numeric (looks numeric), interpreted Excel serial date origin \"1899-12-30\". Otherwise date strings cleaned (truncated 24 chars, \"Sept\" → \"Sep\", trailing \" 12:00:00 \" removed) parsed .Date() using formats make_date_fmts(date_order). parsing, function drops rows first unparseable date onward (.e., truncates first NA date), filters remaining NA dates. Column selection/renaming: col_trans maps desired output names regex patterns matched detected header names. pattern matches multiple columns, kept suffixed (name, name2, name3, ...). Numeric coercion: non-date columns, character values \"$\" / \"USD \" stripped, commas replaced comma_rep, converted .numeric(). force_numeric = TRUE, converted numeric column kept even values fail parse; otherwise column replaced non-NA values parse successfully.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/read_timeseries_excel.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read a time series from an Excel workbook — read_timeseries_excel","text":"","code":"if (FALSE) { # \\dontrun{ x <- read_timeseries_excel(   file = \"example.xlsx\",   sheet = 1,   date_col = \"^Date$\",   col_trans = c(nav = \"NAV\", tr = \"TR\"),   date_order = \"dmy\" ) } # }"},{"path":"https://stantraykov.github.io/fundsr/reference/read_xlm_directory.html","id":null,"dir":"Reference","previous_headings":"","what":"Read and combine XLM data from multiple Xetra XLSX files — read_xlm_directory","title":"Read and combine XLM data from multiple Xetra XLSX files — read_xlm_directory","text":"Scans directory Xetra ETF XLSX files, extracts XLM column associated metadata, returns combined data frame standardized column names parsed dates.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_xlm_directory.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read and combine XLM data from multiple Xetra XLSX files — read_xlm_directory","text":"","code":"read_xlm_directory(directory, header_rows = c(4, 5), col_types = NULL)"},{"path":"https://stantraykov.github.io/fundsr/reference/read_xlm_directory.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read and combine XLM data from multiple Xetra XLSX files — read_xlm_directory","text":"directory Directory containing XLSX files read. header_rows Integer vector indicating rows contain header information read_xlsx_hdr(). col_types Optional column type specification passed read_xlsx_hdr().","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_xlm_directory.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read and combine XLM data from multiple Xetra XLSX files — read_xlm_directory","text":"data frame containing combined XLM records files directory.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/read_xlm_directory.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Read and combine XLM data from multiple Xetra XLSX files — read_xlm_directory","text":"XLSX file processed read_xlsx_hdr(), filtered relevant XLM, ticker, product-name fields (stored columns xlm, ticker, name, date). Month–Year embedded XLM column name parsed used observation date.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/reset_state.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear fundsr session state — reset_state","title":"Clear fundsr session state — reset_state","text":"Convenience helper clears mutable internal fundsr state: fund storage (.fundsr_storage) fund-index map (.fundsr$fund_index_map), import-function registry (.fundsr$data_loaders), Inkscape export queue (.fundsr$inkscape_queue), XLM bookkeeping vector (.fundsr$done_xlm_sets).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/reset_state.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear fundsr session state — reset_state","text":"","code":"reset_state()"},{"path":"https://stantraykov.github.io/fundsr/reference/reset_state.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clear fundsr session state — reset_state","text":"Invisibly returns NULL. Called side effects.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/reset_state.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clear fundsr session state — reset_state","text":"","code":"reset_state()"},{"path":"https://stantraykov.github.io/fundsr/reference/roll_diffs.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute rolling annualized tracking difference statistics — roll_diffs","title":"Compute rolling annualized tracking difference statistics — roll_diffs","text":"fund–index pair fund_index_map, computes rolling, annualized tracking differences backward-looking window n_days calendar days. log-return CAGR forms returned.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/roll_diffs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute rolling annualized tracking difference statistics — roll_diffs","text":"","code":"roll_diffs(   df,   n_days,   fund_index_map,   date_col = \"date\",   index_level = c(\"net\", \"gross\"),   annual_days = 365,   messages = c(\"roll\", \"skip\"),   gross_suffix = \"-GR\" )"},{"path":"https://stantraykov.github.io/fundsr/reference/roll_diffs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute rolling annualized tracking difference statistics — roll_diffs","text":"df Data frame containing date column, fund columns, benchmark/index columns referenced fund_index_map. n_days Rolling lookback window calendar days. fund_index_map Named character vector mapping fund column names corresponding benchmark/index base column names. date_col Name date column df. Must class Date sorted ascending order. index_level index level use, one \"net\" \"gross\". \"gross\", gross_suffix appended mapped index base name lookup df. annual_days Number days used annualization. messages Character vector controlling emitted messages. \"roll\" (per-pair progress) \"skip\" (skip reasons). Use messages = \"roll\" show progress, messages = \"skip\" show skip reasons, messages = character() NULL silence messages. gross_suffix Suffix appended mapped index base name index_level = \"gross\".","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/roll_diffs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute rolling annualized tracking difference statistics — roll_diffs","text":"named list two data frames, log cagr. data frame contains date_col followed one column per fund (named fund_index_map), holding rolling annualized tracking differences.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/roll_diffs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute rolling annualized tracking difference statistics — roll_diffs","text":"date \\(t\\), anchor date \\(t_0\\) chosen last available observation \\(t - n\\_days\\) fund index values present. Let \\(\\Delta = t - t_0\\) calendar days. annualized tracking differences : Log-return difference: $$       \\left[\\ln\\left(\\frac{f_t}{f_{t_0}}\\right) - \\ln\\left(\\frac{i_t}{i_{t_0}}\\right)\\right]       \\times \\frac{annual\\_days}{\\Delta}     $$ CAGR difference: $$       \\left(\\frac{f_t}{f_{t_0}}\\right)^{annual\\_days/\\Delta}       - \\left(\\frac{i_t}{i_{t_0}}\\right)^{annual\\_days/\\Delta}     $$ Values NA anchor found, required inputs missing, \\(\\Delta \\le 0\\), values invalid chosen formula (e.g. non-positive inputs log returns). Emitted messages visible verbosity level >= 1 (option fundsr.verbosity).","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/run_data_loaders.html","id":null,"dir":"Reference","previous_headings":"","what":"Run registered data loaders — run_data_loaders","title":"Run registered data loaders — run_data_loaders","text":"Runs data loader registry (.fundsr$data_loaders) populate (refresh) package's storage environment (.fundsr_storage).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/run_data_loaders.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run registered data loaders — run_data_loaders","text":"","code":"run_data_loaders(reload = FALSE)"},{"path":"https://stantraykov.github.io/fundsr/reference/run_data_loaders.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run registered data loaders — run_data_loaders","text":"reload Logical scalar. TRUE, forces full reload setting options(fundsr.reload = TRUE) duration call.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/run_data_loaders.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run registered data loaders — run_data_loaders","text":"Invisibly returns .fundsr_storage running data loaders.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/run_data_loaders.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run registered data loaders — run_data_loaders","text":"function temporarily sets fundsr.reload option data loaders can decide whether recompute cached objects. previous value option \"fundsr.reload\" restored exit, even data loader errors. Data loaders taken .fundsr$data_loaders called sequentially registration order. registered function must take arguments.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/run_plots.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate and export rolling-difference and XLM plots from a specification — run_plots","title":"Generate and export rolling-difference and XLM plots from a specification — run_plots","text":"Iterates plot specifications produces rolling-difference plots CAGR log-return variants. plot saved via save_plot(), optional XLM plots may also generated. generated plot objects stored environment returned.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/run_plots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate and export rolling-difference and XLM plots from a specification — run_plots","text":"","code":"run_plots(   roll_diffs,   n_days,   plot_spec,   xlm_data = NULL,   add_gg_params = ggplot2::geom_blank(),   bmark_type = c(\"net\", \"gross\"),   suffix = \"\",   ... )"},{"path":"https://stantraykov.github.io/fundsr/reference/run_plots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate and export rolling-difference and XLM plots from a specification — run_plots","text":"roll_diffs list length 2 containing data frames, named cagr log (CAGR differences log-return differences). n_days Rolling-window length days (passed plot_roll_diffs() labelling). plot_spec data frame list data frames describing plot parameters. Expected columns include: plot_id, title, data_filter, gg_params, width, height, funds. xlm_data Optional data frame used produce XLM plots, including date, xlm, ticker, name columns. Defaults NULL. add_gg_params Optional ggplot component (list components) appended generated plot addition per-plot gg_params defined plot_spec. Defaults ggplot2::geom_blank(). bmark_type Benchmark type used plot titles: \"net\" \"gross\". suffix Character string appended plot_id constructing filenames names returned environment. Defaults \"\". ... Additional arguments passed plot_roll_diffs().","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/run_plots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate and export rolling-difference and XLM plots from a specification — run_plots","text":"environment containing ggplot objects. Objects stored names corresponding base filenames used save_plot(): plot_id{suffix} CAGR variant, plot_id{suffix}_L log-return variant, (generated) xlm_plot_id{suffix} XLM plots.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/run_plots.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate and export rolling-difference and XLM plots from a specification — run_plots","text":"row plot_spec, function constructs CAGR-based log-return-based variant using plot_roll_diffs() writes resulting plots via save_plot(), using filename suffix (_L) distinguish log-return variant. optional suffix appended plot_id filenames (environment keys) formed. Additional arguments ... forwarded plot_roll_diffs(). plot_spec provided list data frames, function binds single specification. title column may provided list column (e.g. keep multilingual named vector single per-row value). xlm_data supplied, XLM plot generated per unique set Xetra tickers using plot_xlms(). Fund tickers mapped Xetra tickers via fundsr.xetra_map option (tickers present map used -). first plot specification encountered given ticker set determines base filename xlm_<plot_id{suffix}> used saving storing resulting XLM plot.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/run_plots.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate and export rolling-difference and XLM plots from a specification — run_plots","text":"","code":"if (FALSE) { # \\dontrun{ plots <- run_plots(roll_diffs, n_days, plot_spec, xlm_data = xlm_data) plots[[\"global\"]] plots[[\"global_L\"]] plots[[\"xlm_global\"]] } # }"},{"path":"https://stantraykov.github.io/fundsr/reference/save_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Save a plot as SVG and/or PNG and queue for Inkscape conversion — save_plot","title":"Save a plot as SVG and/or PNG and queue for Inkscape conversion — save_plot","text":"Saves plot SVG file save_svg = TRUE. SVG saved, Inkscape export action also queued PNG generation can performed later batch via export_pngs(). Optionally, save_png = TRUE, function also saves PNG immediately via ggplot2::ggsave() (independently queueing).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/save_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save a plot as SVG and/or PNG and queue for Inkscape conversion — save_plot","text":"","code":"save_plot(   file,   plot,   px_width = fundsr_get_option(\"px_width\", 1300),   height = 12,   width = 12,   units = \"in\",   out_dir = fundsr_get_option(\"out_dir\"),   save_png = fundsr_get_option(\"internal_png\", FALSE),   save_svg = fundsr_get_option(\"export_svg\", TRUE),   background = \"white\" )"},{"path":"https://stantraykov.github.io/fundsr/reference/save_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save a plot as SVG and/or PNG and queue for Inkscape conversion — save_plot","text":"file Base filename (without extension) used output files. plot plot object (typically ggplot) saved. px_width Target width pixels PNG output. Used queued Inkscape export-width, (save_png = TRUE) used compute DPI immediate PNG saving. height Height saved plot units. width Width saved plot units. units Units width/height (e.g. \"\"). immediate PNG saving, \"\", \"cm\", \"mm\" supported (compute DPI px_width). out_dir Output directory files written. save_png Logical scalar; TRUE, also saves PNG immediately. save_svg Logical scalar; TRUE, saves SVG queues Inkscape export action. background Background color used immediate PNG saving via ggplot2::ggsave() (bg).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/save_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save a plot as SVG and/or PNG and queue for Inkscape conversion — save_plot","text":"Invisibly returns NULL. Called side effects.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/save_plot.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Save a plot as SVG and/or PNG and queue for Inkscape conversion — save_plot","text":"save_svg = TRUE, SVG written \"{file}.svg\". Inkscape action string stored .fundsr$inkscape_queue[file] SVG can later exported \"{file}.png\" px_width pixels wide export_pngs() run. Queueing refused either output path contains semicolon (;), since Inkscape actions separated semicolons. save_png = TRUE, PNG also written immediately \"{file}.png\". PNG uses width, height, units SVG, sets dpi = px_width / width_in pixel width approximately px_width keeping comparable physical-size typography across outputs. PNG background set via background. save_svg save_png FALSE, function issues warning returns without writing files queueing exports.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/spdr.html","id":null,"dir":"Reference","previous_headings":"","what":"Import an SPDR fund — spdr","title":"Import an SPDR fund — spdr","text":"Wrapper around load_fund() SPDR files.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/spdr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import an SPDR fund — spdr","text":"","code":"spdr(ticker, file = NULL, benchmark = NULL)"},{"path":"https://stantraykov.github.io/fundsr/reference/spdr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import an SPDR fund — spdr","text":"ticker Fund ticker. file Optional filename override. benchmark Optional benchmark key.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/store_timeseries.html","id":null,"dir":"Reference","previous_headings":"","what":"Store a cached object in the package storage environment — store_timeseries","title":"Store a cached object in the package storage environment — store_timeseries","text":"Evaluate expression cache result package storage environment (.fundsr_storage) given name. expression re-evaluated cached value missing, overwrite = TRUE, global option fundsr.reload TRUE. Optionally merges additional fund/index mappings .fundsr$fund_index_map.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/store_timeseries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Store a cached object in the package storage environment — store_timeseries","text":"","code":"store_timeseries(var_name, expr, fund_index_map = NULL, overwrite = FALSE)"},{"path":"https://stantraykov.github.io/fundsr/reference/store_timeseries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Store a cached object in the package storage environment — store_timeseries","text":"var_name Character scalar. Name variable store .fundsr_storage. expr expression. Evaluated caller's environment (re)computing cached value. fund_index_map Optional named vector list. Fund/index pairs merge .fundsr$fund_index_map. Names used keys. overwrite Logical scalar. TRUE, recompute replace existing cached value, regardless fundsr.reload.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/store_timeseries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Store a cached object in the package storage environment — store_timeseries","text":"Invisibly returns NULL (called side effects).","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/store_timeseries.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Store a cached object in the package storage environment — store_timeseries","text":"expr evaluated environment store_timeseries() called (.e. caller's environment), assigned .fundsr_storage var_name. Caching behavior controlled : overwrite = TRUE (always recompute), options(fundsr.reload = TRUE) (force recomputation globally), absence var_name .fundsr_storage (compute ). fund_index_map supplied, merged .fundsr$fund_index_map via name-based assignment: existing entries names replaced.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/ubs.html","id":null,"dir":"Reference","previous_headings":"","what":"Import a UBS fund — ubs","title":"Import a UBS fund — ubs","text":"Wrapper around load_fund() UBS files.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/ubs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import a UBS fund — ubs","text":"","code":"ubs(ticker, file = NULL, benchmark = NULL)"},{"path":"https://stantraykov.github.io/fundsr/reference/ubs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import a UBS fund — ubs","text":"ticker Fund ticker. file Optional filename override. benchmark Optional benchmark key.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/vang.html","id":null,"dir":"Reference","previous_headings":"","what":"Import a Vanguard fund — vang","title":"Import a Vanguard fund — vang","text":"Wrapper around load_fund() Vanguard files.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/vang.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import a Vanguard fund — vang","text":"","code":"vang(ticker, file = NULL, benchmark = NULL)"},{"path":"https://stantraykov.github.io/fundsr/reference/vang.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import a Vanguard fund — vang","text":"ticker Fund ticker. file Optional filename override. benchmark Optional benchmark key.","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/reference/xtra.html","id":null,"dir":"Reference","previous_headings":"","what":"Import an Xtrackers fund — xtra","title":"Import an Xtrackers fund — xtra","text":"Wrapper around load_fund() Xtrackers files.","code":""},{"path":"https://stantraykov.github.io/fundsr/reference/xtra.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import an Xtrackers fund — xtra","text":"","code":"xtra(ticker, file = NULL, benchmark = NULL, retrieve_benchmark = FALSE)"},{"path":"https://stantraykov.github.io/fundsr/reference/xtra.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import an Xtrackers fund — xtra","text":"ticker Fund ticker. file Optional filename override. benchmark Optional benchmark key. retrieve_benchmark Logical; also import benchmark column.","code":""},{"path":[]},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"breaking-changes-0-3-0","dir":"Changelog","previous_headings":"","what":"Breaking changes","title":"fundsr 0.3.0","text":"rename clear_storage() argument clear_fund_index_map clear_map avoid name clash clear_fund_index_map() change join_env() full join order alphabetical","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"importing-0-3-0","dir":"Changelog","previous_headings":"","what":"Importing","title":"fundsr 0.3.0","text":"add support unabbreviated month names (specify capital M date_order parameters, e.g. \"Mdy\") add download checks, retries, temp + atomic rename download_fund_data(); also prefer curl available (curl added Suggests:)","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"documentation-0-3-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"fundsr 0.3.0","text":"add categories function reference; improve docs, doc-examples, vignettes add logo","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"fixes-0-3-0","dir":"Changelog","previous_headings":"","what":"Fixes","title":"fundsr 0.3.0","text":"fix unset fundsr.data_dir behavior (stop writing working directory; use tools::R_user_dir(\"fundsr\", = \"data\"))","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"documentation-0-2-1","dir":"Changelog","previous_headings":"","what":"Documentation","title":"fundsr 0.2.1","text":"add Importing vignette improve docs vignettes","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"rolling-diffs-0-2-1","dir":"Changelog","previous_headings":"","what":"Rolling diffs","title":"fundsr 0.2.1","text":"add Excel reader function read_timeseries_excel() improve read_timeseries(): support text dates, column name date add fund_index_map merge/clean functions add_fund_index_map(), clean_fund_index_map() add example Excel + CSV dataset extdata late_join parameter join_env() param rename/depr.: data_sheet -> sheet, coalesce_suffixed -> join_precedence","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"plot-output-0-2-1","dir":"Changelog","previous_headings":"","what":"Plot output","title":"fundsr 0.2.1","text":"add automatic Inkscape detection","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"fixes-0-2-1","dir":"Changelog","previous_headings":"","what":"Fixes","title":"fundsr 0.2.1","text":"add various join_env() df column checks make errors easier understand","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"vignettes-examples-translations-0-2-1","dir":"Changelog","previous_headings":"","what":"Vignettes, examples, translations","title":"fundsr 0.2.1","text":"fix examples use system.file()","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"rolling-diffs-0-2-0","dir":"Changelog","previous_headings":"","what":"Rolling diffs","title":"fundsr 0.2.0","text":"improve gross/net index handling (state resets needed; index_level gross_suffix parameters roll_diffs()) add build_all_series() (wrapping around run_data_loaders() join_env()) refactor roll_diffs() speed / better interface","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"survival-plots-0-2-0","dir":"Changelog","previous_headings":"","what":"Survival plots","title":"fundsr 0.2.0","text":"add survival curve plots using Human Mortality Database (HMD) empirical data EUROPOP2023 projections","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"fixes-0-2-0","dir":"Changelog","previous_headings":"","what":"Fixes","title":"fundsr 0.2.0","text":"skip unavailable funds, indices calculating differences ensure y-limits rolling-difference plots include last 30 days (even outside quantiles) make roll_diffs() skip benchmarks (addition funds) found supplied df robust gg_params list flattening date breaks fixed months, quarter biannual (plot >3 yrs)","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"tests-0-2-0","dir":"Changelog","previous_headings":"","what":"Tests","title":"fundsr 0.2.0","text":"add rolling test","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"vignettes-examples-translations-0-2-0","dir":"Changelog","previous_headings":"","what":"Vignettes, examples, translations","title":"fundsr 0.2.0","text":"add life vignette add example scripts; translate index names common_spec fix glob_funds example include EUR indices fix Bulgarian translation: wrong y-axis label log-return charts translate examples Bulgarian","code":""},{"path":[]},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"configuration-0-1-0","dir":"Changelog","previous_headings":"","what":"Configuration","title":"fundsr 0.1.0","text":"fundsr_options() provides validated wrapper around options() setting common fundsr.* options (data directories, export settings, URL registry, ). add_fund_urls() adds/updates fund download registry (option fundsr.fund_urls).","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"import-and-storage-0-1-0","dir":"Changelog","previous_headings":"","what":"Import and storage","title":"fundsr 0.1.0","text":"Internal caching/storage imported time series via storage environment (get_storage(), clear_storage(), store_timeseries()), optional forced refresh via options(fundsr.reload = TRUE). Extensible data-loader framework imports (add_data_loader(), run_data_loaders(), clear_data_loaders()). Download configured fund files local data directory (download_fund_data()). Read generic delimited time series epoch timestamps (read_timeseries()). Read MSCI TSV files (read_msci_tsv()) import MSCI Excel data via msci(). Import fund NAV (optional benchmark series) Excel register fund→benchmark mappings (load_fund(), get_fund_index_map()). Fallback parser Excel 2003 XML (SpreadsheetML) files. Convenience helpers provider-specific Excel formats: ishs() (iShares), spdr() (SPDR), xtra() (Xtrackers), amun() (Amundi), inve() (Invesco), vang() (Vanguard), ubs() (UBS), hsbc() (HSBC). join_env() combines multiple tables stored environment, optional “late” left-joins optional coalescing .x/.y join columns.","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"rolling-differences-0-1-0","dir":"Changelog","previous_headings":"","what":"Rolling differences","title":"fundsr 0.1.0","text":"roll_diffs() computes rolling, annualized tracking differences fund–index pairs either log-return CAGR-style variants, producing <fund>_rd columns.","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"plotting-and-export-0-1-0","dir":"Changelog","previous_headings":"","what":"Plotting and export","title":"fundsr 0.1.0","text":"plot_roll_diffs() visualizes rolling tracking-difference series quantile-based y-limits bps axis labeling. run_plots() generates plot sets specification, producing CAGR log-return variants. SVG-first export pipeline: save_plot() writes SVG files queues PNG exports batch conversion via Inkscape (export_pngs()), clear_inkscape_queue() reset queue. Optional direct PNG export via ggplot2::ggsave() without Inkscape (lower quality; controlled fundsr.internal_png). Xetra Liquidity Measure (XLM) support: read plot XLM time series (read_xlm_directory(), plot_xlms()), optional back-translation displayed tickers using options(fundsr.xetra_map).","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"internationalization-0-1-0","dir":"Changelog","previous_headings":"","what":"Internationalization","title":"fundsr 0.1.0","text":"Chart elements available two languages (English Bulgarian), language selection based LANGUAGE / LC_MESSAGES. Language-aware user-supplied strings supported via named vectors keyed language code.","code":""},{"path":"https://stantraykov.github.io/fundsr/news/index.html","id":"utilities-0-1-0","dir":"Changelog","previous_headings":"","what":"Utilities","title":"fundsr 0.1.0","text":"reset_state() clears cached storage, loader registry, queued exports, XLM bookkeeping current session.","code":""}]
